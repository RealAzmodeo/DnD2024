## Glosario de Etiquetas XML para D&D 5e (v1.2)

Este documento detalla las etiquetas XML y atributos utilizados para estructurar características de clase, dotes (feats), razas, trasfondos (backgrounds) y objetos (items), basado en el trabajo realizado hasta la V2 de `feature/structure-class-features-xml`, la revisión de dotes de PHB24, la estructuración de razas de PHB24, la revisión de trasfondos de PHB24 y la estructuración de objetos de DMG24.

---
### **Etiquetas Principales (Contenedores Raíz)**
---

**`<class>`**
Contenedor raíz para una definición de clase.
*   **`<name>`**: Nombre de la clase (ej: "Fighter [2024]").
*   **`<source page="[numero]">[NombreLibroFuente]</source>`**: Información de la fuente del libro y número de página. (Recomendado como hijo directo de `<class>`).
    *   *Nota de Discrepancia (Clases): Actualmente, los archivos de clase como `class-fighter-phb24.xml` no tienen este tag a nivel raíz; la información de la fuente suele estar dentro del texto de una característica general o de características individuales. Se recomienda mover a un tag `<source>` de nivel superior para consistencia.*
*   **`<description_text>`**: (Opcional) Párrafo introductorio o de lore general sobre la clase.
*   **`<hd>`**: Dado de golpe (Hit Die) de la clase (ej: 6, 8, 10, 12).
*   **`<saving_throw_proficiencies>`**: Contenedor para las competencias en tiradas de salvación.
    *   **`<ability>[AbilityName]</ability>`**: (Repetir para cada habilidad, ej: `<ability>Strength</ability>`, `<ability>Constitution</ability>`).
*   **`<armor_proficiencies>`**: Contenedor para las competencias en armaduras y escudos.
    *   **`<proficiency type="[LightArmor|MediumArmor|HeavyArmor|Shields|SpecificArmorName]"/>`**: (Repetir para cada tipo).
    *   *(Nota: `SpecificArmorName` podría usarse si una clase solo obtiene competencia con un tipo muy específico de armadura no cubierto por las categorías generales).*
*   **`<weapon_proficiencies>`**: Contenedor para las competencias en armas.
    *   **`<proficiency type="[SimpleWeapons|MartialWeapons|SpecificWeaponName|WeaponCategory]"/>`**: (Repetir para cada tipo. `WeaponCategory` podría ser "Swords", "Axes", etc., si es necesario).
*   **`<tool_proficiencies_options>`**: (Opcional) Contenedor para opciones de competencia en herramientas.
    *   **`<choice_from_list list="[ToolName1|ToolName2|any_artisans_tool|any_musical_instrument]" count="[numero]"/>`**.
    *   **`<fixed_tool name="[ToolName]"/>`**: Si se otorga una herramienta específica sin elección.
*   **`<skill_proficiencies_options>`**: Contenedor para opciones de competencia en habilidades.
    *   **`<choice_from_list list="[SkillName1|SkillName2|...|any]" count="[numero]"/>`**: Define de qué lista y cuántas habilidades se pueden elegir.
    *   **`<fixed_skill name="[SkillName]"/>`**: Si se otorga una habilidad específica sin elección.
*   **`<starting_equipment_options>`**: (Opcional) Contenedor para las opciones de equipo inicial. (Ver estructura detallada similar a la de Trasfondos `<starting_equipment>`).
*   **`<spellcasting ability="[AbilityName]" progression="[Full|Half|Third|Pact|None]" prepared_caster="[true|false]">`**: (Opcional, si la clase tiene lanzamiento de conjuros).
    *   `ability`: Característica principal para el lanzamiento de conjuros (ej: Wisdom, Charisma, Intelligence).
    *   `progression`: Describe la progresión de los espacios de conjuro (ej: "Full" para Cleric/Wizard, "Half" para Paladin/Ranger, "Third" para Eldritch Knight, "Pact" para Warlock). "None" si no es lanzador de conjuros primario.
    *   `prepared_caster`: "true" si la clase prepara conjuros de una lista más amplia (ej. Cleric, Wizard), "false" si conoce un número fijo de conjuros (ej. Sorcerer, Bard).
    *   **`<slotsReset type="[LongRest|ShortRest]"/>`**: Cuándo se reinician los espacios de conjuro.
    *   **`<ritual_casting available="[true|false]"/>`**: Si la clase puede lanzar conjuros como rituales (si tiene la característica).
    *   **`<spellbook_access type="[WizardList|ClericList|BardList|...|SubclassSpecificList]" can_learn_from_scrolls="true|false"/>`**: Define la lista de conjuros principal a la que accede la clase.
*   **`<subclass_title name="[TítuloSubclase]"/>`**: (Opcional) El nombre que la clase usa para sus subclases (ej: "Dominio Divino" para Clérigo, "Sendero Primario" para Bárbaro, "Escuela Arcana" para Mago).
*   **`<autolevel level="[numero]">`**: Contenedor para características y cambios que ocurren en un nivel específico "X" de la clase.
    *   **`scoreImprovement="true|false"`** (atributo opcional, default `false`): Indica si en este nivel se ofrece una Mejora de Puntuación de Característica (ASI).
    *   **`<slots>`** (opcional): Define los espacios de conjuros por nivel de conjuro para este nivel de clase (ej: `<slots>2,3</slots>` para 2 de nivel 1, 3 de nivel 2). Se usa para clases con progresión de slots definida por tabla.
    *   **`<feature optional="true|false" type="[CoreFeature|SubclassFeatureChoice|SubclassFeature]">`**: Define una característica de clase. (Ver sección `<feature>` / `<trait>` más abajo).
        *   `optional`: "true" si es una elección (ej. algunas características de subclase), "false" si se gana automáticamente.
        *   `type`: Ayuda a categorizar la característica. `CoreFeature` para características de la clase base. `SubclassFeatureChoice` si este feature representa el momento en que se elige la subclase. `SubclassFeature` para características otorgadas por una subclase.
        *   **`<subclass_restriction name="[NombreSubclase]"/>`** (opcional): Si esta característica pertenece o es modificada por una subclase específica.
        *   **`<replaces_feature name="[OldFeatureName]"/>`** (opcional): Si esta característica reemplaza una anterior (ej: Tasha's Cauldron of Everything optional features).
    *   **`<counter name="[CounterName]" initial_value="[numero]" reset_on="[ShortRest|LongRest|Dawn|Never]" notes="[texto_explicativo]">`**: (Opcional) Para rastrear usos de características.
        *   `initial_value`: Valor inicial del contador.
        *   `reset_on`: Cuándo se resetea el contador.
        *   `notes`: Para explicar cómo escala el contador si no es por `<scaling>` dentro de un `<uses>` de una característica.
*   **`<multiclassing_requirements>`**: (Opcional) Requisitos para multiclasear *hacia* esta clase.
    *   **`<ability_score name="[AbilityName]" min="[numero]"/>`** (puede haber varios).
*   **`<multiclassing_proficiencies_gained>`**: (Opcional) Competencias ganadas al multiclasear *hacia* esta clase.
    *   (Usar `<armor_proficiencies>`, `<weapon_proficiencies>`, etc. aquí).
*   *(Nota de Discrepancia (Clases): Los archivos de clase actuales como `class-fighter-phb24.xml` usan etiquetas planas como `<proficiency>`, `<numSkills>`, `<armor>`, `<weapons>`, `<tools>`. Estas deben ser reemplazadas por las etiquetas estructuradas como `<saving_throw_proficiencies>`, `<skill_proficiencies_options>`, `<armor_proficiencies>`, `<weapon_proficiencies>`, `<tool_proficiencies_options>` definidas arriba).*

**`<feat>`**
Contenedor raíz para la definición de un dote.
*   **`<name>`**: Nombre del dote (ej: "Origin: Alert [2024]", "Actor [2024]").
*   **`<source page="[numero]">[NombreLibroFuente]</source>`**: Información de la fuente.
*   **`repeatable="true|false"`** (atributo opcional, default `false`): Si el dote puede ser tomado múltiples veces.
    *   **`<repeatable_note condition="[texto_condicion]">`** (si `repeatable="true"`): Texto explicando las condiciones de repetición.
*   **`origin_feat="true|false"`** (atributo opcional, default `false`): Si es un dote de origen (normalmente elegible en nivel 1).
*   **`<prerequisite>`**: Condiciones para tomar el dote. (Ver sección `<prerequisite>` más abajo).
*   **`<benefit name="[BenefitName]">`**: Contenedor para un beneficio específico del dote. Un dote puede tener múltiples beneficios. (Ver sección `<feature>` / `<benefit>` / `<trait>` más abajo para sub-etiquetas comunes).
*   **`<text>`**: (Legado/Evitar) Descripción textual completa. Reemplazar con etiquetas estructuradas dentro de `<benefit>`.
*   **`<modifier>`**: (Legado/Evitar) Reemplazar con etiquetas semánticas dentro de `<benefit>`.

**`<race>`**
Contenedor raíz para la definición de una raza o linaje.
*   **`<name>`**: Nombre de la raza/linaje (ej: "Aasimar [2024]", "Elf, Drow [2024]").
*   **`<source page="[numero]">[NombreLibroFuente]</source>`**: Información de la fuente.
*   **`<description_text>`**: (Opcional) Párrafo(s) introductorio(s) o de lore general sobre la raza.
*   **`<creature_type type="[Humanoid|Aberration|etc.]" tags="[tag1,tag2]"/>`**: (Recomendado) Tipo de criatura y cualquier subtipo/etiqueta.
    *   `type`: El tipo principal de criatura.
    *   `tags` (opcional): Una lista separada por comas de etiquetas adicionales (ej: "elf", "orc", "shapechanger").
    *   *(Nota de Discrepancia (Razas): Actualmente, los archivos de raza como `races-phb24.xml` definen esto mediante un `<trait category="core" name="Creature Type"><text>Humanoid</text></trait>`. Se recomienda esta etiqueta de nivel superior para mayor consistencia y facilidad de consulta).*
*   **`<size_summary code="[S|M|L|T|G|H]"/>`**: Código de tamaño resumido (ej: M, S). El detalle y opciones van en un `<trait name="Size" category="core">`.
*   **`<speed base="[numero_pies]"/>`**: Velocidad base de movimiento terrestre. Otras velocidades (vuelo, nado, etc.) se definen en traits.
*   **`<ability_score_increases_option>`**: (Opcional, si la raza otorga ASI directamente, más común en versiones anteriores a 2024. Las razas de PHB24 suelen obtener ASIs a través de su trasfondo).
    *   (Ver estructura de `<grants_ability_score_increase>` o `<asi_options>` si se necesita aquí).
*   **`<age_description text="[texto_descripcion_edad]"/>`**: (Opcional) Descripción textual sobre la edad típica de la raza.
*   **`<alignment_description text="[texto_descripcion_alineamiento]"/>`**: (Opcional) Descripción textual sobre las tendencias de alineamiento de la raza.
*   **`<languages_known>`**: (Opcional) Contenedor para idiomas conocidos por la raza.
    *   **`<language name="[LanguageName]" type="[standard|telepathy|understands_only]"/>`** (repetible)
    *   **`<choice_from_list list="[Language1|Language2|any_standard|any_exotic]" count="[numero]"/>`** (para opciones de idioma)
*   **`<spellcasting_ability default="[AbilityName]" allow_choice="[true|false]"`**: (Opcional, si la raza tiene conjuros raciales generales cuya habilidad no está definida en el propio trait que los otorga).
    *   `default`: Habilidad de lanzamiento por defecto si `allow_choice="false"` o si el jugador no elige.
    *   `allow_choice`: "true" si la habilidad de lanzamiento para los conjuros raciales puede ser una elección (ej: INT/WIS/CHA). La elección real se haría a través de un `<choice>` en un `<trait>` o al seleccionar el conjuro si el `<grants_spell_learning>` lo permite.
*   **`<trait name="[TraitName]" category="[description|core|species|lineage|ancestry_choice]" gained_at_character_level="[numero]">`**: Define una característica racial. (Ver sección `<feature>` / `<benefit>` / `<trait>` más abajo para sub-etiquetas comunes).

---
### **Etiquetas de Características (Común a Clases, Dotes, Razas)**
---

**`<feature optional="YES|NO">`** (Usado dentro de `<class>`) / **`<benefit name="[BenefitName]">`** (Usado dentro de `<feat>`) / **`<trait name="[TraitName]" category="[category_type]" gained_at_character_level="[numero]">`** (Usado dentro de `<race>`)

Estas etiquetas sirven como contenedores para las descripciones y mecánicas de una característica específica, un beneficio de dote, o un rasgo racial. Comparten muchas sub-etiquetas comunes.

*   **Para `<trait>` (racial):**
    *   **`name`**: Nombre del rasgo racial.
    *   **`category`**: Ayuda a organizar y categorizar los rasgos raciales.
        *   `description`: Lore general, edad, alineamiento, etc. (principalmente `<text>`).
        *   `core`: Rasgos fundamentales como Tipo de Criatura, Tamaño detallado.
        *   `species`: Rasgos comunes a la especie principal antes de cualquier elección de linaje/subraza.
        *   `lineage`: Rasgos específicos de un linaje o subraza (ej. Drow Lineage, Fiendish Legacy).
        *   `ancestry_choice`: Para rasgos que presentan una elección mayor basada en la ascendencia y que pueden afectar otros rasgos (ej. Draconic Ancestry del Dragonborn).
    *   **`gained_at_character_level="[numero]"`** (opcional): Para rasgos que se activan o se obtienen en un nivel de personaje específico. (Nota: Para `<feature>` de clase, el nivel se define en `<autolevel>`. Para `<benefit>` de dote, se usa `<prerequisite>`).
*   **Contenido común:** `<name>`, `<text>` (descripción textual), y luego etiquetas estructuradas como:
    *   `<action>`, `<choice>`, `<cost>`, `<duration>`, `<effect>`, `<grants_ability_score_increase>`, `<grants_proficiency>`, `<grants_spell_learning>`, `<modifies_action>`, `<modifies_rule>`, `<modifies_spell>`, `<resource_pool>`, `<resource>`, `<uses>`, `<recharge>`, `<restriction>`, `<note>`, etc. (Detalladas más abajo).

**`<prerequisite>`** (Usado dentro de `<feat>`, o potencialmente dentro de `<feature>`/`<trait>` si una característica tiene prerrequisitos específicos)
*   **`<level min="[numero]"/>`**: Nivel mínimo de personaje (para dotes) o de clase (si dentro de una clase).
*   **`<ability_score name="[AbilityName]" min="[numero]"/>`**.
*   **`<proficiency type="[Armor|WeaponCategory|Feature|Tool|Skill]" name="[SpecificName]" present="true|false"/>`**.
*   **`<spellcasting present="true|false"/>`**: Prerrequisito de tener la capacidad de lanzar conjuros.
*   **`<or_conditions>` / `<and_conditions>`**: Para agrupar condiciones.
*   **`text_override="[texto_complejo]"`**: Para prerrequisitos textuales complejos.

---
### **Etiquetas Detalladas (Sub-etiquetas comunes dentro de `<feature>`, `<benefit>`, `<trait>`)**
---

**`<action type="[ActionType]" (otros atributos)>`**
*   **`type`**: `Action`, `BonusAction`, `Reaction`, `MagicAction`, `Free`, `NoAction`, `Special`, `Utilize` (para usar ítems como parte de la acción), `PartOfAttackAction`, `ImmediatelyFollowingAttack`, `Ritual`.
*   **`name_override="[texto]"`**: Si la acción es una versión especial de una acción estándar (ej: `type="BonusAction" name_override="Dash"` para Adrenaline Rush del Orco).
*   **`to_assume_form="true"`**, **`to_leave_form="true"`**, **`to_manifest="true"`**, **`to_move_area="true"`**.
*   **`duration="[texto]"`** (para la acción en sí, ej. ritual).
*   **`timing="[texto]"`**.
*   **`trigger="[texto_disparador]"`** (especialmente para Reacciones o acciones con disparadores específicos).

**`<asi_options>`** (Dentro de un `<feature scoreImprovement="YES">` o un dote ASI)
*   **`<option description="[texto]">`**.

**`<choice name="[ChoiceName]" count="[number]" (otros atributos)>`**
*   **`from_list="[lista_separada_por_comas_o_pipa]"`**.
*   **`from_table_ref="[TableName]"`**.
*   **`trigger="[texto]"`** (ej: "each_time_you_transform" para Celestial Revelation).
*   **`<option name="[OptionName]" description_text="[texto descriptivo de la opción]">`**:
    *   `description_text`: Usado para describir la opción si no hay sub-etiquetas complejas.
    *   Puede contener `<text>` para descripción más larga, y luego `<effect>`, `<action>`, `<cost>`, etc.
    *   **`type="Feat"`**: Si la opción es elegir un dote.
    *   **`grants_damage_type_option="[DamageType]"`**: Si la opción define un tipo de daño a elegir.
    *   **`<effect type="DamageTypeAssociation" value="[DamageType]" for_trait="[TraitName1,TraitName2]"/>`**: (Específico para Razas/AncestryChoice) Asocia un tipo de daño con esta opción, que puede ser referenciado por otros traits.
*   **`<recharge type="[SR|LR|Dawn|Other]" description="[texto]"`**: Si la habilidad de cambiar la elección se recarga.

**`<grants_ability_score_increase>`**
*   **`<fixed_ability name="[AbilityName]" value="[+N]" max="[20|22]"/>`**.
*   **`<choice_from_abilities list="[STR|DEX|...|any]" count="[N]" value_per_choice="[+N]" total_increase="[+N]" max="[20|22]"/>`**.

**`<cost (atributos)>`**
*   **`resource="[ResourceName|ItemName|HitDice]"`**.
*   **`value="[number|any|variable|ProficiencyBonus]"`, `value_formula="[formula]"`**.
*   ... (otros atributos como en la v1) ...

**`<duration description="[texto|formula]" (otros atributos)>`**
*   **`ends_early_if="[condicion1,condicion2,dismissed_no_action,Incapacitated_condition]"`**: Lista de condiciones separadas por coma.

**`<effect (atributos)>`**
*   **`type`**: `Damage`, `Heal`, `Bonus`, `Advantage`, `Disadvantage`, `Condition`, `Movement`, `Speed`, `SpeedIncrease` (puede incluir `new_total_speed`), `SpeedReduction`, `Resistance`, `Immunity`, `Cover`, `ACBonus`, `DamageReduction`, `DamageBonus`, `ExtraDamage`, `Teleport`, `Detection`, `Sense` (para Darkvision, Blindsight, Tremorsense), `CreateArea`, `CreateWard`, `Transformation` (puede incluir `new_size`), `Buff`, `Debuff`, `GainTemporaryHitPoints`, `HitPointMaximumIncrease`, `HitPointIncrease` (fijo o por nivel), `AbilityScoreIncrease`, `ReachIncrease`, `DispelMagic`, `Revive`, `RollBonus`, `SizeCategory` (para el trait de Tamaño), `GainResource`, `SetHitPoints`.
*   **Para `type="Sense"`**:
    *   **`name="[Darkvision|Blindsight|Tremorsense]"`**.
    *   **`range="[numero_pies]"`**.
    *   **`upgrades_existing="true"`** (opcional, si mejora un sentido existente, ej: Drow Darkvision).
    *   **`<condition text="[texto_condicion_para_el_sentido]"/>`** (opcional, ej: para Tremorsense del Enano).
*   **Para `type="HitPointMaximumIncrease"`**:
    *   **`value_formula="[formula]"`** (ej: `max(1,character_level)` para Enano, o `2*character_level` para Dote Tough).
    *   **`description="[texto_explicativo]"`** (opcional).
*   **Para `type="Resistance"` / `type="Immunity"`**:
    *   **`damage_types="[type1,type2,...]"`**.
    *   **`damage_types_ref="[TraitNameReferencia]"`**: (Específico para Razas/AncestryChoice) El tipo de daño se determina por una elección hecha en otro trait (ej: Draconic Resistance).
*   **Para `type="Damage"` / `type="ExtraDamage"`**:
    *   **`damage_type_ref="[TraitNameReferencia]"`**: Similar a `damage_types_ref` para Resistencia.
    *   **`area_shape="[texto_forma_area]"`** (ej: "15-foot_Cone", "30-foot_Line_5_feet_wide").
    *   **`<scaling level="X" dice="[nuevo_dado]" value="[nuevo_valor]"/>`**: (Nota: Para razas, `level` se refiere a nivel de personaje).
*   **`<condition text="[texto_condicion_para_el_efecto]"/>`** (anidada, si el efecto solo aplica bajo cierta condición).
*   ... (otros atributos y sub-etiquetas como en la v1, incluyendo `save_type`, `save_dc`, `save_effect`, `target_description`, etc.) ...
*   **`<on_failed_save (atributos_de_effect)>`**: Efecto si se falla una tirada de salvación.
*   **`<on_successful_save (atributos_de_effect)>`**: Efecto si se tiene éxito en una tirada de salvación.
*   **`<on_hit (atributos_de_effect)>`**: Efecto si un ataque impacta.
*   **`<on_condition condition="[texto_condicion]"> (atributos_de_effect) </on_condition>`**: Efecto que ocurre bajo una condición específica.

**`<enhancements>` / `<enhances_feature feature_name="[FeatureName]" (otros atributos)>` / `<enhances_ability ability_name="[AbilityName]">`**
Define cómo una característica mejora otra característica o habilidad existente.
*   **`feature_name`**: Nombre de la característica principal que se mejora.
*   **`ability_name`**: Nombre de la habilidad específica (ej: Flurry of Blows) que se mejora.
*   **`benefit_name="[BenefitName]"`** (opcional): Si mejora un beneficio específico dentro de una característica.
*   **`<enhancement_option for_choice="[OptionName]">`**: Si la mejora aplica a una opción específica de una característica con elecciones.
    *   Contiene etiquetas `<effect>`, `<modifies_effect>`, etc., que describen la mejora.
*   **`<modifies_effect type="[TypeName]" new_value="[valor]" new_value_formula="[formula]" new_value_dice="[dado]"/>`**: Modifica un efecto existente.
*   **`<modifies_trigger new_damage_types_affected="[any_damage_type|lista]"/>`**: Cambia el disparador de un efecto.
*   **`<modifies_aura_property property="[radius|etc.]" new_value="[valor]"/>`**: Cambia una propiedad de un aura.
*   **`<modifies_rule rule_name="[RuleName]" new_basis="[texto]" new_formula="[formula]"/>`**: Modifica una regla de juego.
*   **`<benefit_while_active>`**: Para beneficios que se añaden mientras otra cosa está activa.
*   **`<additional_benefit>`**: Para beneficios adicionales directos.
*   **`<alternative_activation_cost>`**: Ofrece una forma alternativa de activar la característica mejorada.

**`<grants_proficiency type="[Skill|Weapon|Armor|Tool|SavingThrow|Language]" (otros atributos)>`**
*   **`type`**: Tipo de competencia (`Skill`, `Tool`, `Weapon`, `Armor`, `SavingThrow`, `Language`, `WeaponProperty`).
*   **`name="[NombreEspecifico]"`** (ej: "Insight", "Cook's Utensils", "Martial Weapons", "Light Armor", "Strength", "Druidic", "Loading").
*   **`choice_from_list="[lista_opciones_separadas_por_coma_o_pipa|any|any_artisans_tool|any_musical_instrument|any_skill_or_tool|specific_table_name]"`**: Si se elige de una lista.
    *   `any`: Para una elección de cualquier habilidad, herramienta, idioma, etc., según el `type`.
    *   `any_skill_or_tool`: Permite elegir entre cualquier habilidad o cualquier herramienta.
    *   `specific_table_name`: Referencia a una `<inline_table>` definida en otra parte del dote/característica que lista las opciones.
*   **`count="[numero]"`**: Cuántas competencias se otorgan/eligen.
*   **`expertise="true|false"`** (opcional, default `false`).
*   **`ignore_property="true|false"`** (opcional, para `type="WeaponProperty"`).
*   **`proficiency_or_expertise="true|false"`** (opcional).

**`<grants_spell_learning>`**
*   **`type="[Cantrip|Spell]"`**.
*   **`spell_known="[SpellName]"`**.
*   **`count="[numero|ProficiencyBonus]"`**.
*   **`spell_list_choice="[Cleric|Druid|Wizard|...|AnyRitualLevel1]"`**.
*   **`spell_level="[numero]"`** (opcional, nivel del conjuro).
*   **`gained_at_character_level="[numero]"`** (especialmente para conjuros raciales).
*   **`spellcasting_ability_choice="[Intelligence|Wisdom|Charisma]" count="1"`**.
*   **`spellcasting_ability_fixed="[Intelligence|Wisdom|Charisma]"`**.
*   **`spellcasting_ability_choice_ref="[TraitNameDeLaEleccion]"`**: Si la habilidad de lanzamiento se eligió en otro trait (ej: linajes de Elfos/Tieflings).
*   **`always_prepared="true|false"`**.
*   **`counts_against_known="true|false"`**.
*   **`can_use_spell_slots="true|false"`**.
*   **`free_casts_per_rest type="[LongRest|ShortRest|Dawn]" count="[numero|formula]"`**.
    *   `count_formula="[ProficiencyBonus]"`
*   **`can_replace_on_long_rest="true|false"`** (ej: High Elf cantrip).
*   **`replacement_spell_list="[Wizard|etc.]"`** (si `can_replace_on_long_rest="true"`).
*   **`no_components_list="[Verbal|Somatic|Material|...]"`.**
*   **`ritual_casting_only="true|false"`**.
*   **`<spell_modifications>`**:
    *   **`<range_increase value="[+X_feet|double]"/>`**
    *   **`<make_invisible="true"/>`**
    *   **`<duration_override description="[nueva_duracion_texto]"/>`**
*   **`<alternative_grant condition="[texto]" description="[texto_alternativa]"/>`**.

**`<grants_always_prepared_spell name="[SpellName]" (otros atributos)>`**
*   **`name`**: Nombre del conjuro.
*   **`level_gained_at="[numero]"`** (nivel de clase).

**`<grants_feat type="[FightingStyle|EpicBoon|AbilityScoreImprovement|Any|OriginFeat]" count="[number]" recommendation="[FeatName]">`**
*   **`recommendation`** (opcional): Si se recomienda un dote específico.

**`<inline_table name="[TableName]">`**
*   **`<header><col label="[HeaderText1]"/><col label="[HeaderText2]"/></header>`**.
*   **`<row><cell value="[CellText1]"/><cell value="[CellText2]"/></row>`**.

**`<modifies_action action_name="[Attack|Dash|Hide|Study|Search|StandUp|etc.]" (otros atributos)>`**
*   **`new_attacks_allowed="[numero]"`**.
*   **`new_condition_text="[texto]"`**: Para modificar cuándo o cómo se puede usar una acción (ej: Halfling Naturally Stealthy).
*   **`<option_to_replace_attack count="[numero_ataques_a_reemplazar]">`**.
    *   **`<effect description="[texto_efecto_reemplazo]"/>`**.

**`<modifies_spell spell_name="[SpellName]" (otros atributos)>` / `<modifies_spell_casting (atributos)>`**
*   ... (atributos como en la v1) ...

**`<modifies_rule rule_name="[RuleName]" (otros atributos)>`**
*   **`rule_name`**: `CriticalHitRange`, `ArmorClassCalculation`, `UnarmedStrikeDamage`, `DeathSavingThrowResult`, `SleepRequirement`, `MagicalSleep`, `LongRestDuration`, `MovementThroughHostileSpace`, `CarryingCapacity`, etc.
*   **`effect_description="[texto_del_cambio_a_la_regla]"`**: Descripción textual de la modificación.
*   ... (otros atributos como en la v1) ...

**`<resource_pool name="[ResourceName]" (otros atributos)>`**
*   **`value_formula="[ProficiencyBonus|AbilityModifier|FixedNumber|CharacterLevel|ClassLevel]"`**: (Clarificar si es nivel de personaje o clase).
*   ... (atributos como en la v1) ...

**`<resource name="[ResourceName]" (otros atributos)>`**
*   **`value_formula="[formula]"`** (ej: "5*PaladinLevel", "CharacterLevel").
*   **`count_formula="[formula]"`** (ej: "1+WarlockLevel", "ProficiencyBonus").
*   **`<count initial="[numero]"> <scaling level="X" count="[nuevo_numero]"/> </count>`**: `level` es nivel de clase aquí.
*   **`<scaling_table name="[TableName]"> <level val="X" die_size="[dY]" number="[Z]"/> </scaling_table>`**: `val` es nivel de clase.
*   ... (otros atributos como en la v1) ...

**`<trigger text="[texto_disparador]">`**
*   **`text`**: (ej: "when_you_hit_a_creature_with_an_attack_roll", "when_reduced_to_0_HP_but_not_killed_outright").

**`<uses (atributos)>`**
*   **`fixed="[numero]"`**, **`attribute="[AbilityName|ProficiencyBonus]"`**.
*   **`min="[numero]"`**.
*   **`<recharge type="[SR|LR|SR_or_LR|Dawn|Special]" description="[texto]"/>`**.
*   **`<scaling level="X" uses="[nuevo_numero]"/>`**: `level` es nivel de clase o personaje según contexto (feature vs trait).
*   ... (otros atributos como en la v1) ...
*   **Nota:** Para `<scaling level="X">` dentro de un `<trait>` racial, `level` se refiere al nivel total del personaje.

**`<restriction text="[texto_restriccion]">`**
**`<note text="[texto_nota]">`**

**`<equipment_requirements (atributos)>`** (Legado, se busca reemplazar)
*   ... (atributos como en la v1) ...

---
#### **Notas sobre Modelado de Mecánicas Complejas y Específicas**

Si bien el objetivo de este glosario es proporcionar un conjunto robusto de etiquetas para estructurar la mayor cantidad de información mecánica posible, algunas características o reglas de juego pueden tener interacciones o condiciones muy específicas que no se asignan directamente a una única etiqueta predefinida. En tales casos, se deben seguir los siguientes principios:

1.  **Composición sobre Proliferación:** Antes de proponer una nueva etiqueta muy específica, se debe intentar modelar la mecánica mediante la combinación de las etiquetas genéricas existentes (`<effect>`, `<action>`, `<choice>`, `<condition>`, `<trigger>`, `<uses>`, `<recharge>`, `<modifies_rule>`, `<enhances_feature>`, etc.). La flexibilidad de estas etiquetas, especialmente con el uso de atributos descriptivos y la etiqueta `<text>` para clarificación, puede cubrir muchas situaciones complejas.

2.  **Ejemplos de Modelado Compuesto:**
    *   **Múltiples Formas de Recarga/Uso:** Si una característica puede recargarse de varias maneras (ej: "una vez por descanso corto, o gastando un recurso X"), se puede usar múltiples elementos `<recharge>` dentro de `<uses>`, o combinar un `<recharge>` estándar con un `<alternative_activation_cost>` o una etiqueta similar a `<can_reuse_by_expending resource="[ResourceName]">` (como se ve en algunos ejemplos de dotes o características de clase ya estructuradas).
    *   **Añadir Opciones a Características Existentes:** Si una nueva característica de subclase añade una nueva forma de usar una característica de clase base (ej: "ahora también puedes usar tu Inspiración de Bardo para X"), esto se modelaría idealmente con `<enhances_feature feature_name="[FeatureNameBase]">` y luego, dentro de esta, se añadiría la nueva `<choice>` u `<option>` o `<effect>` que describe la funcionalidad adicional.
    *   **Acciones Condicionadas por Estados Específicos:** Para mecánicas como "una acción para terminar las vibraciones en un objetivo" (ej: Monk Quivering Palm), esto se representaría como un `<action type="Action">` cuyo efecto (`<effect>`) es terminar una `<condition name="Vibrating">` previamente aplicada por otra característica. El estado "vibrating" en sí mismo sería un efecto de la característica inicial.

3.  **Priorizar la Semántica Mecánica:** El objetivo es capturar la *intención mecánica* de la regla. Si una etiqueta personalizada en un XML existente (ej: `<action_to_end_vibrations>`) puede ser descompuesta en un disparador, una acción, y un efecto sobre una condición, esa descomposición es preferible.

4.  **Uso del Tag `<text>` para Clarificación:** Dentro de cualquier etiqueta estructurada, el tag `<text>` o un atributo `description` pueden usarse para incluir el texto original o una explicación en lenguaje natural, especialmente cuando la estructura, aunque mecánicamente completa, pueda ser compleja de interpretar a primera vista.

5.  **Cuándo Proponer Nuevas Etiquetas:** Si después de intentar la composición, una mecánica resulta ser:
    *   Común a múltiples clases, dotes, razas, etc.
    *   Claramente distinta en su función de las etiquetas existentes.
    *   Difícil de representar de forma intuitiva o no ambigua con las etiquetas actuales.
    En ese caso, se debe proponer la adición de una nueva etiqueta genérica al glosario.

El objetivo es mantener un equilibrio entre un glosario manejable y la capacidad de representar fielmente las reglas del juego de forma estructurada.

---
### **Etiquetas Específicas de Dotes (Feats) y Mecánicas Detalladas**
---

**`<action_option name="[ActionName]"`** (Dentro de `<benefit>` o `<trait>` que otorga una acción específica)
Define un beneficio que es una acción específica o modifica una acción existente.
*   **`name`**: Nombre descriptivo de la acción/beneficio (ej: "Battle Medic", "Telekinetic Shove", "AdrenalineRushDash").
*   **`type`**: (Ver etiqueta `<action>` para valores comunes).
*   **`name_override="[Dash|etc.]"`**: Si la acción es una versión especial de una acción estándar.
*   **`trigger="[texto_disparador]"`**.
*   **`uses_per_turn="[numero]"`** (opcional).
*   **`uses_per_rest type="[SR|LR|Dawn]" count="[numero|formula]"`** (opcional).
*   **`<cost resource="[ResourceName|ItemName]" .../>`** (opcional).
*   **`<range value="[numero_pies|self|touch|weapon_reach]"/>`** (opcional).
*   **`<target description="[texto_descripcion_objetivo]"/>`** (opcional).
*   **`<duration description="[texto_duracion]"/>`** (opcional).
*   Puede contener etiquetas `<effect>`, `<choice>`, etc.

**`<passive_effect>`** (Dentro de `<benefit>` o `<trait>`)
Define un beneficio que está siempre activo o se aplica automáticamente bajo ciertas condiciones.
*   **`description="[Texto descriptivo breve si es necesario]"`**.
*   Puede contener `<effect>`, `<modifies_rule>`, `<grants_proficiency>`, etc.

**`<reroll_option>`** (Dentro de `<benefit>` o `<trait>`)
*   **`dice_condition="[rolls_a_1|rolls_below_X|any]"`**.
*   **`on_roll_for="[any_D20_Test|healing_spell_or_ability|...|any_damage_roll_for_spell]"`**.
*   ... (otros atributos como en la v1) ...

**`<crafting_option name="[CraftingBenefitName]">`**
*   ... (atributos como en la v1) ...

**`<discount_benefit item_type="[nonmagical|any]" value_percentage="[numero]">`**
*   ... (atributos como en la v1) ...

**`<special_movement name="[MovementName]">`**
*   ... (atributos como en la v1) ...

**`<special_jump name="[JumpingBenefitName]">`**
*   ... (atributos como en la v1) ...

**`<weapon_property_interaction>`**
*   ... (atributos como en la v1) ...

**`<damage_reduction>`**
*   ... (atributos como en la v1) ...

**`<saving_throw_modification>`**
*   ... (atributos como en la v1) ...

**`<concentration_effect>`**
*   ... (atributos como en la v1) ...

**`<reactive_spell_cast>`**
*   ... (atributos como en la v1) ...

**`<somatic_component_allowance description="[texto]">`**
*   ... (atributos como en la v1) ...

**`<weapon_mastery_option name="[MasteryName]">`**
*   ... (atributos como en la v1) ...

**`<blindsight_grant range="[numero_pies]">`**
*   ... (atributos como en la v1) ...

**`<stealth_enhancement>`**
*   ... (atributos como en la v1) ...

**`<hidden_attack_rule description="[texto]">`**
*   ... (atributos como en la v1) ...

**`<speed_increase_static value="[numero_pies]">`**
*   ... (atributos como en la v1) ...

**`<difficult_terrain_interaction condition="[texto_condicion]" effect_description="[texto_efecto]">`**
*   ... (atributos como en la v1) ...

**`<opportunity_attack_modification>`**
*   ... (atributos como en la v1) ...

**`<cover_interaction type="[ranged_weapon_attacks|spell_attack_rolls]" ignores_cover="[HalfCover|ThreeQuartersCover|TotalCover]"/>`**
*   ... (atributos como en la v1) ...

**`<long_range_interaction type="[ranged_weapon_attacks]" no_disadvantage_at_long_range="true"/>`**
*   ... (atributos como en la v1) ...

**`<spell_range_increase condition="[texto_condicion_conjuro]" increase_by="[+X_feet|double]"/>`**
*   ... (atributos como en la v1) ...

**`<shield_bash_option>`**
*   ... (atributos como en la v1) ...

**`<shield_interpose_option>`**
*   ... (atributos como en la v1) ...

**`<telepathic_communication range="[numero_pies]">`**
*   ... (atributos como en la v1) ...

**`<repeatable_note condition="[texto_condicion_para_repetir]">`**
*   ... (atributos como en la v1) ...

---
### **Sección Específica para Razas (Adiciones/Clarificaciones)**
---

**`<race>` (Contenedor Raíz)**
*   Como se describió en "Etiquetas Principales".
*   Debe contener una serie de etiquetas `<trait>`.

**`<size_summary code="[S|M|L]"/>`**
*   **Uso:** Hijo directo de `<race>`.
*   **Descripción:** Proporciona un código de tamaño resumido para la raza (ej: 'M' para Mediano, 'S' para Pequeño).
*   **Atributos:**
    *   `code`: El código de tamaño (S, M, L, T, G, H).
*   **Nota:** El tamaño detallado, incluyendo opciones si las hay (ej: Aasimar puede ser Mediano o Pequeño), se define dentro de un `<trait category="core" name="Size">` utilizando `<choice>` y `<effect type="SizeCategory">`.

**`<speed base="[numero_pies]"/>`**
*   **Uso:** Hijo directo de `<race>`.
*   **Descripción:** Define la velocidad base de movimiento terrestre de la raza.
*   **Atributos:**
    *   `base`: La velocidad en pies (ej: "30").
*   **Nota:** Otras velocidades (vuelo, nado, escalada, excavación) o modificaciones a la velocidad base se definen a través de `<effect type="Speed">` o `<effect type="SpeedIncrease">` dentro de los `<trait>` correspondientes.

**`<trait name="[TraitName]" category="[description|core|species|lineage|ancestry_choice]" gained_at_character_level="[numero]">`**
*   **Uso:** Hijo directo de `<race>`. Es la etiqueta fundamental para cada característica racial.
*   **Atributos:**
    *   `name`: Nombre del rasgo (ej: "Darkvision", "Fey Ancestry", "Drow Lineage").
    *   `category`:
        *   `description`: Para el lore general, edad, alineamiento, apariencia física, etc. Usualmente contendrá principalmente la etiqueta `<text>`.
        *   `core`: Para rasgos fundamentales de la raza que no son opcionales y definen su naturaleza básica, como "Creature Type" o el "Size" detallado (que puede incluir una elección).
        *   `species`: Para rasgos comunes a la especie principal antes de cualquier elección de linaje o subraza (ej: Darkvision base de un Elfo, antes de la mejora Drow).
        *   `lineage`: Para rasgos que son específicos de un linaje, subraza o variante particular de la raza (ej: "Drow Lineage", "Forest Lineage" para Gnomos, "Fiendish Legacy" para Tieflings). Las razas con linajes se definen como entradas `<race>` separadas (ej: `<name>Elf, Drow [2024]</name>`).
        *   `ancestry_choice`: Para rasgos que presentan una elección principal basada en la ascendencia y que pueden tener efectos que influyen en otros rasgos (ej: "Draconic Ancestry" del Dragonborn, "Giant Ancestry" del Goliath). Estas elecciones se definen usando la etiqueta `<choice>`.
    *   `gained_at_character_level="[numero]"` (opcional): Si el rasgo, o una parte significativa de él, solo se obtiene cuando el personaje alcanza un cierto nivel total.
*   **Contenido:** Puede contener `<text>` para la descripción completa, y luego una combinación de etiquetas estructuradas del glosario como `<effect>`, `<action>`, `<choice>`, `<grants_spell_learning>`, `<grants_proficiency>`, `<uses>`, `<recharge>`, `<modifies_rule>`, etc., para definir la mecánica del rasgo.
*   **Nota sobre `<scaling>`:** Cuando la etiqueta `<scaling level="X" .../>` se usa dentro de un `<trait>` racial, el atributo `level="X"` se refiere al nivel total del personaje, no a un nivel de clase.

**`<effect type="DamageTypeAssociation" value="[DamageType]" for_trait="[TraitName1,TraitName2]"/>`**
*   **Uso:** Dentro de una `<option>` de un `<choice>` en un `<trait category="ancestry_choice">`.
*   **Descripción:** Asocia un tipo de daño específico con la opción elegida. Este tipo de daño puede ser referenciado por otros rasgos de la misma raza.
*   **Atributos:**
    *   `value`: El tipo de daño (ej: "Acid", "Fire", "Cold").
    *   `for_trait`: Lista separada por comas de los nombres de otros traits que utilizarán este tipo de daño (ej: "Breath Weapon,Damage Resistance" para Dragonborn).
*   **Referencia en otros traits:** Otros traits pueden referenciar este tipo de daño usando atributos como `damage_type_ref="[NombreDelTraitDeEleccionDeAscendencia]"` en sus etiquetas `<effect type="Damage">` o `<effect type="Resistance">`. (Ej: `<effect type="Resistance" damage_types_ref="Draconic Ancestry"/>`).

**`<effect type="SizeCategory" value="[Small|Medium|Large|...]" description_text="[texto descriptivo opcional]"/>`**
*   **Uso:** Generalmente dentro de una `<option>` de un `<choice>` en un `<trait name="Size">`.
*   **Descripción:** Define la categoría de tamaño del personaje.
*   **Atributos:**
    *   `value`: La categoría de tamaño (ej: "Medium", "Small").
    *   `description_text` (opcional): Texto breve que describe las dimensiones típicas para ese tamaño (ej: "about 4-7 feet tall").

**Clarificación para `<grants_spell_learning>` en Razas:**
*   `gained_at_character_level="[numero]"`: Usar este atributo para indicar cuándo se obtiene el conjuro.
*   `spellcasting_ability_choice_ref="[NombreDelTraitDeLinaje]"`: Si la habilidad de lanzamiento para un conjuro se determina por una elección hecha en el trait de linaje (ej: "Fiendish Legacy (Abyssal)"), este atributo puede referenciar el nombre de ese trait donde se hizo la elección de habilidad. El parser necesitaría conectar esta referencia.

---
### **Etiquetas Específicas para Trasfondos (Backgrounds)**
---

**`<background>`**
Contenedor raíz para la definición de un trasfondo.
*   **`<name>`**: Nombre del trasfondo (ej: "Acolyte [2024]").
*   **`<source page="[numero]">[NombreLibroFuente]</source>`**: Información de la fuente.
*   **`<description_text>`**: Descripción general y narrativa del trasfondo.
*   **`<ability_score_increase_option>`**: Describe las opciones de incremento de puntuación de característica.
    *   **`<text>`**: (Opcional, si se quiere incluir la descripción textual de la regla de ASI del trasfondo). Texto que describe las opciones estándar de ASI (ej: "+2 a una, +1 a otra, o +1 a tres de una lista").
    *   **`<abilities_list list="[AbilityName1,AbilityName2,AbilityName3]"/>`**: Enumera las tres habilidades relevantes para este trasfondo de las cuales se pueden elegir los incrementos.
    *   **`<custom_choice_text>`**: (Para trasfondos personalizados) Texto que describe cómo elegir las habilidades si no sigue el patrón estándar.
*   **`<granted_feat name="[FeatName]" source_text="[LibroDeFuente p.NumeroPagina]" feat_id_ref="[ID_del_Dote_si_existe_en_otro_archivo]">`**: Especifica el dote otorgado por el trasfondo.
    *   `name`: El nombre del dote.
    *   `source_text` (opcional): Texto que indica la fuente y página del dote si se quiere repetir aquí.
    *   `feat_id_ref` (recomendado a futuro): Un identificador único que enlaza al dote definido en un archivo de dotes separado.
    *   **`<text>`**: (Opcional si `feat_id_ref` se usa y los dotes son consultables) Descripción completa del dote. (Nota: Idealmente, se reemplazaría por una referencia `feat_id_ref` si los dotes están completamente estructurados y son referenciables).
    *   **`<custom_choice_text>`**: (Para trasfondos personalizados) Texto que describe cómo elegir un dote de origen si no es uno fijo.
*   **`<skill_proficiencies>`**: Contenedor para las competencias en habilidades. (Normalmente dos habilidades específicas).
    *   **`<skill name="[SkillName1]"/>`**: Otorga competencia en una habilidad específica.
    *   **`<skill name="[SkillName2]"/>`**: Otorga competencia en otra habilidad específica.
    *   **`<custom_choice_text count="[numero]">`**: (Para trasfondos personalizados) Texto que describe cómo elegir un número específico de competencias en habilidades.
*   **`<tool_proficiencies>`**: Contenedor para las competencias en herramientas. (Normalmente una herramienta específica o una elección de categoría).
    *   **`<tool name="[SpecificToolName]"/>`**: Otorga competencia en una herramienta específica.
    *   **`<choice_from_category category="[ArtisansTools|MusicalInstruments|GamingSets]" description_text_override="[lista_de_herramientas_de_esa_categoria_si_se_incluye_directamente]"`**: Permite elegir una herramienta de una categoría específica.
        *   `category`: El tipo de categoría de herramienta.
        *   `description_text_override` (opcional): Si se proporciona, este texto (que debe ser la lista de herramientas de esa categoría) se usará. Es útil si la lista de herramientas se incluye directamente en el XML del trasfondo. Evitar texto genérico aquí si ya está cubierto por la estructura.
    *   **`<custom_choice_text>`**: (Para trasfondos personalizados) Texto que describe cómo elegir una competencia en herramienta.
    *   *(Nota de Discrepancia (Trasfondos): Evitar incluir un tag `<text>` genérico dentro de `<tool_proficiencies>` si ya se usa `<tool name="..."/>` o `<choice_from_category.../>`, ya que la estructura es autoexplicativa).*
*   **`<starting_equipment>`**: Contenedor para el equipo inicial.
    *   **`<text>`**: (Opcional) Texto introductorio general si es necesario (ej: "Elige A o B:").
    *   **`<option_A>`**: Contenedor para la opción A de equipo.
        *   **`<item name="[ItemName]" quantity="[numero]"/>`**: Un objeto específico y su cantidad.
        *   **`<gold currency_code="GP" amount="[numero]"/>`**: Cantidad de oro (u otra moneda).
    *   **`<option_B>`**: Contenedor para la opción B de equipo.
        *   **`<gold currency_code="GP" amount="[numero]"/>`**: Cantidad de oro.
    *   **`<custom_choice_text>`**: (Para trasfondos personalizados) Texto que describe cómo ensamblar un paquete de equipo (ej: "Ensambla un paquete de equipo por valor de 50 PO...").
*   **`<background_feature name="[NombreCaracteristicaTrasfondo]" source_text="[LibroDeFuente p.NumeroPagina]">`**: (Opcional) Para la característica especial del trasfondo si no es el dote.
    *   **`<text>`**: Descripción completa de la característica.
    *   *(Nota: Muchos trasfondos de PHB24 otorgan un dote en lugar de una característica única de trasfondo. Esta etiqueta es para casos donde sí exista una característica separada).*
*   **`<suggested_characteristics>`**: (Opcional) Contenedor para Rasgos de Personalidad, Ideales, Vínculos y Defectos.
    *   **`<personality_traits><trait_option text="[texto rasgo 1]"/><trait_option text="[texto rasgo 2]"/>...</personality_traits>`**
    *   **`<ideals><ideal_option text="[texto ideal 1]" alignment_hint="[Bueno|Legal|Caótico|etc.]"/>...</ideals>`**
    *   **`<bonds><bond_option text="[texto vínculo 1]"/>...</bonds>`**
    *   **`<flaws><flaw_option text="[texto defecto 1]"/>...</flaws>`**

---
### **Etiquetas Específicas de Subclase/Mecánicas Únicas (Clase)**
---
**`<mystic_arcanum level="[6|7|8|9]" spell_choice_from_list="Warlock">`** (Warlock)
Define la elección de un conjuro para Mystic Arcanum.

**`<spell_mastery>`** (Wizard)
Contenedor para la característica Spell Mastery.
*   **`<choose_spell level="[1|2]" from_spellbook="true" condition="[texto_condicion]"/>`**.

**`<signature_spells count="2" level="3" from_spellbook="true">`** (Wizard)
Define los Signature Spells.

**`<channel_divinity_option/>`**
Etiqueta marcadora para indicar que una característica es una opción de Canalizar Divinidad.

**`<focus_point_save_dc formula="[formula]">`** (Monk)
Define la CD de salvación para habilidades que usan Puntos de Foco.

**`<maneuver_save_dc formula="[formula]">`** (Battle Master Fighter)
Define la CD de salvación para maniobras.

**`<learns_maneuvers (atributos)>`** (Battle Master Fighter)
Define cuántas maniobras se aprenden.

**`<learns_metamagic_options (atributos)>`** (Sorcerer)
Define cuántas opciones de Metamagia se aprenden.

**`<learns_invocations (atributos)>`** (Warlock)
Define cuántas invocaciones se aprenden.

**`<companion_rules name="[CompanionName]">`** (Beast Master Ranger)
Contenedor para reglas específicas de un compañero.
*   **`<property name="[PropertyName]" value="[texto_valor]"/>`**
*   **`<combat_behavior>`**, **`<restoring_or_replacing>`**, etc.

**`<flexible_casting>`** (Sorcerer - Font of Magic)
Contenedor para las opciones de conversión de espacios de conjuro y puntos de hechicería.

**`<ward_recharge_options>`** (Abjurer Wizard - Arcane Ward)
Contenedor para opciones de recarga del ward.

**`<usage_penalty>`** (Evoker Wizard - Overchannel)
Contenedor para las penalizaciones por uso repetido.
*   **`<first_use_no_effect/>`**
*   **`<subsequent_use_before_LR>`**
*   **`<scaling_penalty_on_further_uses_before_LR description="[texto]"/>`**

---
### **Etiquetas Específicas para Hechizos (Spells)**
---

**`<spell>`**
Contenedor raíz para la definición de un hechizo individual. Se espera que estos se agrupen en archivos por escuela (ej: `spells-abjuration-phb24.xml`).
*   **`<name>`**: Nombre del hechizo. (Existente en otros contextos, adaptado).
*   **`<level>`**: Nivel del hechizo (0 para trucos/cantrips). (Existente en otros contextos, adaptado).
*   **`<school code="[A|C|D|EN|EV|I|N|T]">[NombreCompletoEscuela]</school>`**: Escuela de magia.
    *   `code`: Abreviatura estándar de la escuela (A: Abjuración, C: Conjuración, D: Adivinación, EN: Encantamiento, EV: Evocación, I: Ilusión, N: Nigromancia, T: Transmutación).
    *   Texto: Nombre completo de la escuela (ej: "Abjuración").
*   **`<ritual available="[true|false]"/>`**: Indica si el hechizo puede ser lanzado como un ritual.
    *   `available`: "true" si es un ritual, "false" en caso contrario.
*   **`<casting_time description="[TextoCompletoDelTiempoDeLanzamiento]">`**: Describe el tiempo de lanzamiento.
    *   `description`: El texto original del tiempo de lanzamiento (ej: "1 Action", "1 Bonus Action", "1 Reaction, which you take when...").
    *   **`<value>`** (opcional): Valor numérico si aplica (ej: 1, 10).
    *   **`<unit>`** (opcional): Unidad del tiempo (`action`, `bonus_action`, `reaction`, `minute`, `hour`, `round`, `special`).
    *   **`<condition text="[condicion_especial_o_trigger_reaccion]"/>`** (opcional): Texto adicional si el tiempo de lanzamiento tiene condiciones especiales o es una reacción con un disparador específico.
*   **`<range description="[TextoCompletoDelRango]">`**: Describe el rango del hechizo.
    *   `description`: El texto original del rango (ej: "Self", "Touch", "60 feet", "Self (15-foot cone)").
    *   **`<value>`** (opcional): Valor numérico o palabra clave (`self`, `touch`, `sight`, `unlimited`, `special`).
    *   **`<unit>`** (opcional): Unidad del rango si `value` es numérico (`feet`, `mile`).
    *   **`<shape>`** (opcional): Forma del área de efecto si aplica (`cone`, `cube`, `cylinder`, `line`, `radius`, `sphere`, `special`).
    *   **`<shape_value>`** (opcional): Dimensiones de la forma (ej: "15-foot" para un cono, "20-foot-radius" para una esfera).
*   **`<components>`**: Contenedor para los componentes del hechizo.
    *   **`<verbal/>`**: Etiqueta vacía si el componente Verbal está presente.
    *   **`<somatic/>`**: Etiqueta vacía si el componente Somático está presente.
    *   **`<material consumed="[true|false]" cost_gp="[numero]" cost_text="[texto_alternativo_costo]">[descripcion_del_material]</material>`**: Describe un componente material. Puede haber múltiples.
        *   `consumed`: "true" si el material se consume, "false" o ausente si no.
        *   `cost_gp` (opcional): Costo en piezas de oro si el material tiene un valor específico que se consume o es requerido.
        *   `cost_text` (opcional): Para costos no estándar o descripciones adicionales (ej: "a diamond worth at least 50 gp", "which the spell consumes").
        *   Texto: La descripción textual del componente material (ej: "a tiny ball of bat guano and sulfur").
*   **`<duration description="[TextoCompletoDeLaDuracion]">`**: Describe la duración del hechizo.
    *   `description`: El texto original de la duración (ej: "Instantaneous", "Concentration, up to 1 minute", "8 hours").
    *   **`<value>`** (opcional): Valor numérico o palabra clave (`instantaneous`, `until_dispelled`, `until_triggered`, `special`, `concentration`).
    *   **`<unit>`** (opcional): Unidad de la duración si `value` es numérico (`round`, `minute`, `hour`, `day`, `year`).
    *   **`<concentration available="[true|false]" up_to="[true|false]"/>`**: Indica si requiere concentración.
        *   `available`: "true" si requiere concentración.
        *   `up_to`: "true" si la duración es "hasta X tiempo" (ej: "Concentration, up to 1 minute").
*   **`<description>`**: Contenedor principal para el texto descriptivo del hechizo.
    *   **`<p>[parrafo_de_texto]</p>`**: Para párrafos de texto. Se pueden usar múltiples.
    *   **`<list type="[bullet|ordered]">`**: Para listas.
        *   **`<item>[elemento_de_lista]</item>`**: Elemento individual de la lista.
    *   **`<table>`**: Para tablas dentro de la descripción del hechizo (usar estructura similar a `<inline_table>`).
        *   **`<header><col label="Col1"/><col label="Col2"/></header>`**
        *   **`<row><cell>Val1</cell><cell>Val2</cell></row>`**
*   **`<classes text_original="[TextoOriginalDeClases]">`**: Lista de clases y subclases que pueden aprender/usar el hechizo.
    *   `text_original` (opcional): El texto original de la sección de clases del hechizo, para referencia.
    *   **`<class_name>[NombreClase]</class_name>`**: Nombre de la clase (ej: "Wizard"). (Repetible).
    *   **`<subclass_restriction for_class="[NombreClasePadre]" name="[NombreSubclase] (Dominio/Patron/etc.)"/>`**: Si el hechizo es específico de una subclase. (Repetible).
*   **`<source book="[NombreDelLibro]" page="[NumeroPagina]" other_sources="[fuente_alternativa_si_existe]"/>`**: Información de la fuente del hechizo.
    *    `book`: Nombre del libro de origen principal.
    *    `page`: Número de página en el libro de origen.
    *    `other_sources` (opcional): Para listar otras fuentes si el hechizo aparece en múltiples lugares.
*   **`<roll description="[DescripcionDeLaTirada]" type="[damage|healing|effect|attack|utility]">`**: (Repetible) Para representar dados que se tiran como parte del hechizo.
    *   `description`: Descripción de para qué es la tirada (ej: "Acid Damage", "Healing", "Subtract from Roll", "Determine effect duration").
    *   `type`: El propósito de la tirada (`damage`, `healing`, `effect` para tiradas misceláneas, `attack` para tiradas de ataque de conjuro, `utility` para tiradas no directamente dañinas/curativas como duración en dX rounds).
    *   **`<dice>[formula_dado]</dice>`**: La fórmula del dado (ej: "1d6", "2d8"). *Nota de Discrepancia (Hechizos): Los XML actuales a veces incluyen el modificador de habilidad aquí (ej: "2d8+SPELL"). Se recomienda mover esto a `<bonus_from_ability>`.*
    *   **`<damage_type>[Acid|Cold|Fire|...]</damage_type>`** (opcional): Si `type="damage"`, el tipo de daño.
    *   **`<bonus_from_ability>[SPELL|STR|DEX|CON|INT|WIS|CHA]</bonus_from_ability>`** (opcional): Si se añade un modificador de característica al resultado (ej: `+SPELL` para el modificador de la aptitud mágica).
    *   **`<save_details required="[true|false]" type="[STR|DEX|CON|INT|WIS|CHA]" dc_formula="[8+ProficiencyBonus+SPELL|fixed_DC]" effect_on_success="[half_damage|negates_effect|custom_effect_text|none]" effect_on_failure="[full_damage|condition_applied|custom_effect_text]"/>`** (opcional): Si esta tirada específica (ej: de daño) permite una salvación.
        *   `required`: "true" si la salvación es parte integral de este efecto de tirada.
        *   `type`: Tipo de tirada de salvación.
        *   `dc_formula`: Cómo se calcula la CD (puede ser una fórmula o un valor fijo).
        *   `effect_on_success`: Qué ocurre si se tiene éxito en la salvación.
        *   `effect_on_failure`: Qué ocurre si se falla la salvación (a menudo implícito si no se especifica, ej. daño completo).
*   **`<area_of_effect shape="[cone|cube|cylinder|line|radius|sphere|self|special]" value="[dimensiones_numericas]" unit="[feet|miles]" description="[texto_descriptivo_area_completo]"/>`**: (Opcional) Describe el área de efecto si es una característica principal del hechizo y no solo parte del rango.
    *   `description`: Texto completo del área de efecto para referencia.
    *   *(Nota de Discrepancia (Hechizos): Los XML actuales parseados por `parse_spells.py` integran la forma y valor del AoE dentro de la etiqueta `<range>`. Esta etiqueta `<area_of_effect>` es para una definición más explícita y separada si es necesario).*
*   **`<saving_throw ability="[STR|DEX|CON|INT|WIS|CHA]" dc_formula="[8+ProficiencyBonus+SPELL|fixed_DC|text_description]" effect_on_success="[texto_efecto_exito]" effect_on_failure="[texto_efecto_fallo]" notes="[notas_adicionales]"/>`**: (Opcional) Para la tirada de salvación principal del hechizo, si no está directamente ligada a un `<roll>`.
    *   `dc_formula`: Puede ser una fórmula, un número fijo, o una descripción textual si la CD es variable o compleja (ej: "caster's spell save DC").
    *   *(Nota de Discrepancia (Hechizos): Los XML actuales generados por `parse_spells.py` no extraen esta información a una etiqueta de nivel superior; permanece en el texto de descripción. Se recomienda añadirla para mayor estructura).*
*   **`<at_higher_levels>`**: Contenedor para describir cómo escala el hechizo.
    *   **`<cantrip_scaling>`** (para trucos que mejoran con el nivel del personaje):
        *   **`<scaling level="[NivelPersonaje]"> <effect description="[descripcion_mejora_nivel_X]"/> </scaling>`**: (Repetible) Para detallar mejoras específicas por nivel de personaje. El `<effect>` puede incluir cambios a dados de daño, nuevos efectos, etc.
    *   **`<slot_scaling>`** (para hechizos de nivel 1+ que mejoran con espacios de conjuro de nivel superior):
        *   **`<per_slot_above base_level="[NivelDesdeElQueMejora]">`**: Para mejoras que aplican por cada nivel de espacio de conjuro por encima de un nivel base.
            *   **`<effect description="[descripcion_efecto_por_slot_adicional]">`** (Puede contener sub-etiquetas como `<roll_increase>`, `<additional_targets>`, `<duration_increase>`).
        *   **`<specific_slot level="[NivelDeEspacioEspecifico]">`**: Para mejoras que ocurren a un nivel de espacio de conjuro específico.
            *   **`<effect description="[descripcion_efecto_a_este_nivel]">`** (Puede contener sub-etiquetas).
        *   **`<text_block title="[TituloOpcional]">[texto_completo_mejora_inespecifica]</text_block>`**: Para mejoras de nivel superior que son difíciles de estructurar más allá del texto.
*   **`<tags>`** (opcional): Para categorización funcional del hechizo. (Recomendado para facilitar búsquedas y filtros).
    *   **`<tag>[utility|combat|healing|control|debuff|buff|summoning|sensory|social|exploration|teleportation|creation|warding|banishment|movement|perception|communication|environmental]</tag>`**: Ejemplos de etiquetas. (Repetible).
*   *(Nota General sobre Descripciones de Hechizos: Aunque el objetivo es estructurar la mayor cantidad de mecánica posible, la etiqueta `<description><p>...</p></description>` seguirá siendo crucial para el flujo narrativo del hechizo. Para elementos complejos dentro de la descripción, como listas de opciones o tablas (ej. Prismatic Wall), se debe usar `<list>` y `<table>` dentro de `<description>`. La actual `parse_spells.py` no desglosa esto, requiriendo mejora en el parser o edición manual para lograrlo).*

---
### **Etiquetas Específicas para Monstruos (Bestiary)**
---

**`<monster>`**
Contenedor raíz para la definición de un monstruo.
    *   *Nota de Discrepancia (Monstruos): Los archivos XML de bestiario actuales (`bestiary-*.xml`) utilizan una estructura que difiere significativamente de las recomendaciones detalladas a continuación. Las etiquetas actuales son más planas (ej: `<ac>`, `<hp>` como hijos directos de `<monster>`) y dependen mucho de parsear texto. El siguiente esquema propone una estructura más alineada con el resto del glosario para mejorar la consistencia y la granularidad de los datos.*

*   **`<name>[NombreDelMonstruo]</name>`**: Nombre completo del monstruo.
    *   **`<sort_name>[NombreParaOrdenar]</sort_name>`** (opcional): Nombre alternativo para propósitos de ordenamiento (ej: "Dragon, Adult Black").
    *   **`<ancestry>[AncestroComun]</ancestry>`** (opcional): Si es parte de un grupo ancestral (ej: "Black Dragon" para "Adult Black Dragon").
*   **`<source book="[NombreLibro]" page="[numero]" other_sources="[otras_fuentes]"/>`**: Información de la fuente.
*   **`<description_text>`**: (Opcional) Bloque de texto con la descripción general, lore, y ecología del monstruo.
*   **`<flavor_text quote="[true|false]">[TextoDeAmbientacion]</flavor_text>`**: (Opcional, repetible) Texto de ambientación, puede ser una cita.
*   **`<size code="[T|S|M|L|H|G]">[NombreCompletoTamaño]</size>`**: Tamaño del monstruo (ej: `<size code="M">Medium</size>`).
*   **`<creature_type type="[Aberration|Beast|...]" tags="[tag1,tag2,...]"/>`**: Tipo de criatura y etiquetas adicionales.
    *   `type`: El tipo principal (ej: "Fiend", "Humanoid").
    *   `tags` (opcional): Lista separada por comas (ej: "devil", "shapechanger", "orc").
*   **`<alignment text_override="[AlineamientoComplejo]">[AlineamientoAbreviado]</alignment>`**: Alineamiento del monstruo.
    *   Texto: Abreviatura común (ej: LG, N, CE, Unaligned, AnyAlignment).
    *   `text_override` (opcional): Para alineamientos complejos o descripciones textuales (ej: "Usually Lawful Good", "Neutral Evil (75%) or Chaotic Evil (25%)").
*   **`<statistics>`**: Contenedor para las puntuaciones de característica.
    *   **`<strength score="[numero]"/>`**
    *   **`<dexterity score="[numero]"/>`**
    *   **`<constitution score="[numero]"/>`**
    *   **`<intelligence score="[numero]"/>`**
    *   **`<wisdom score="[numero]"/>`**
    *   **`<charisma score="[numero]"/>`**
*   **`<defenses>`**: Contenedor para información defensiva.
    *   **`<armor_class value="[numero]" description="[texto_explicativo_ac]"/>`**: Clase de Armadura.
        *   `description` (opcional): Cómo se calcula la CA si no es simple (ej: "18 (natural armor)", "15 (studded leather, shield)").
    *   **`<hit_points average="[promedio]" formula="[formula_dados]" notes="[notas_adicionales_hp]"/>`**: Puntos de Golpe.
        *   `average`: HP promedio.
        *   `formula`: Fórmula de dados (ej: "12d8+24").
        *   `notes` (opcional): Cualquier nota adicional sobre los HP.
    *   **`<saving_throw_proficiencies>`**: (Opcional) Competencias explícitas en tiradas de salvación.
        *   **`<ability name="[AbilityName]" bonus="[+N]"/>`** (Repetible. El bonus incluye el modificador de característica + competencia si aplica).
    *   **`<damage_resistances list="[type1,type2,...]" notes="[texto_condicional]"/>`**: (Opcional)
    *   **`<damage_immunities list="[type1,type2,...]" notes="[texto_condicional]"/>`**: (Opcional)
    *   **`<damage_vulnerabilities list="[type1,type2,...]" notes="[texto_condicional]"/>`**: (Opcional)
    *   **`<condition_immunities list="[condition1,condition2,...]" notes="[texto_condicional]"/>`**: (Opcional)
*   **`<speed>`**: Contenedor para las velocidades.
    *   **`<walk value="[numero_pies]"/>`**
    *   **`<fly value="[numero_pies]" hover="[true|false]"/>`** (opcional)
    *   **`<swim value="[numero_pies]"/>`** (opcional)
    *   **`<burrow value="[numero_pies]"/>`** (opcional)
    *   **`<climb value="[numero_pies]"/>`** (opcional)
    *   **`<notes>[texto_adicional_velocidad]</notes>`** (opcional, ej: "Spider Climb")
*   **`<senses>`**: Contenedor para los sentidos.
    *   **`<sense name="[Darkvision|Blindsight|Tremorsense|Truesight]" range="[numero_pies]"/>`** (Repetible)
    *   **`<passive_perception value="[numero]"/>`**
    *   **`<notes>[texto_adicional_sentidos]</notes>`** (opcional)
*   **`<languages>`**: Contenedor para los idiomas.
    *   **`<language name="[LanguageName]"/>`** (Repetible)
    *   **`<telepathy range="[numero_pies]"/>`** (opcional)
    *   **`<understands_but_cant_speak list="[Language1,Language2]"/>`** (opcional)
    *   **`<notes>[texto_adicional_idiomas]</notes>`** (opcional, ej: "understands all languages spoken by its creator but can't speak")
*   **`<challenge_rating value="[CR]" xp_value="[XP]"/>`**: Valor de desafío y Puntos de Experiencia.
*   **`<proficiency_bonus value="[+N]"/>`**: (Opcional, si se quiere listar explícitamente. Normalmente se deriva del CR).
*   **`<skill_proficiencies>`**: (Opcional) Competencias en habilidades.
    *   **`<skill name="[SkillName]" bonus="[+N]"/>`** (Repetible. El bonus incluye mod de característica + competencia).
*   **`<traits>`**: Contenedor para rasgos especiales.
    *   **`<trait name="[TraitName]" source_page="[página_si_es_referencia_común]"`**:
        *   Contiene `<text>` para la descripción y puede usar etiquetas estructuradas como `<action>`, `<effect>`, `<uses>`, `<recharge>` si el rasgo tiene mecánicas complejas. (Ver "Etiquetas Detalladas").
        *   *(Nota de Discrepancia (Monstruos): Los XML actuales a menudo tienen un tag `<attack>` no estándar dentro de `<trait>`. Esto debería reestructurarse usando `<effect type="Damage">` dentro de una sub-etiqueta `<action>` si el trait permite una acción, o como un efecto pasivo/disparado).*
*   **`<actions>`**: Contenedor para acciones principales.
    *   **`<action name="[ActionName]" type="[MeleeWeaponAttack|RangedWeaponAttack|MeleeSpellAttack|RangedSpellAttack|Special|Multiattack]"`**:
        *   Contiene `<text>` para la descripción y etiquetas estructuradas.
        *   Para ataques: `<attack_bonus value="[+N]"/>`, `<reach value="[X_feet]"/>` o `<range short="[X_feet]" long="[Y_feet]"/>`, `<target description="[texto_objetivo]"/>`.
        *   Efectos del impacto se definen con `<on_hit><effect type="Damage" .../></on_hit>`.
        *   *(Nota de Discrepancia (Monstruos): Los XML actuales usan un tag `<attack>Nombre|Bonus|Daño</attack>` dentro de `<action>`. Esto debe ser reemplazado por la estructura más detallada).*
*   **`<bonus_actions>`**: (Opcional) Contenedor para acciones adicionales.
    *   **`<action name="[ActionName]" ...>`**: (Misma estructura que acciones principales).
*   **`<reactions>`**: (Opcional) Contenedor para reacciones.
    *   **`<reaction name="[ReactionName]" trigger_text="[texto_disparador]"`**:
        *   Contiene `<text>` y etiquetas estructuradas.
*   **`<legendary_actions per_turn="[numero]">`**: (Opcional) Contenedor para acciones legendarias.
    *   `per_turn`: Número de acciones legendarias que puede usar por turno.
    *   **`<legendary_action name="[ActionName]" cost="[coste_si_es_mas_de_1]"`**:
        *   Contiene `<text>` y etiquetas estructuradas.
*   **`<mythic_actions>`**: (Opcional, para monstruos míticos) Contenedor para acciones míticas.
    *   **`<mythic_action name="[ActionName]" trigger_text="[texto_disparador_mitico]"`**:
        *   Contiene `<text>` y etiquetas estructuradas.
*   **`<lair_actions>`**: (Opcional) Contenedor para acciones de guarida.
    *   **`<lair_action initiative="[numero_iniciativa_guarida]"`**:
        *   `initiative`: En qué cuenta de iniciativa ocurre (normalmente 20).
        *   Contiene `<text>` y etiquetas estructuradas describiendo el efecto.
*   **`<regional_effects>`**: (Opcional) Contenedor para efectos regionales.
    *   **`<effect_description text="[descripcion_efecto_regional]"/>`** (Repetible).
*   **`<spellcasting type="[Innate|SpellcasterClass]" ability="[AbilityName]" spell_save_dc="[DC]" attack_bonus="[+N]"`**: (Opcional)
    *   `type`: "Innate" para lanzamiento innato, "SpellcasterClass" si emula niveles de una clase.
    *   `ability`: Característica de lanzamiento.
    *   **`<at_will>`**:
        *   **`<spell_ref name="[SpellName]" notes="[ej_sin_componentes]"/>`** (Repetible)
    *   **`<per_day count="[X]"`**: (Repetible para diferentes cuentas, ej: 3/Day, 1/Day)
        *   **`<spell_ref name="[SpellName]" notes="[ej_como_nivel_X]"/>`** (Repetible)
    *   **`<spell_slots level="[1-9]" count="[numero]"/>`**: (Repetible, para tipo "SpellcasterClass")
    *   **`<known_spells>`**: (Para tipo "SpellcasterClass" si no prepara)
        *   **`<spell_ref name="[SpellName]"/>`** (Repetible)
    *   **`<prepared_spells>`**: (Para tipo "SpellcasterClass" si prepara)
        *   **`<spell_ref name="[SpellName]"/>`** (Repetible)
    *   *(Nota de Discrepancia (Monstruos): Los XML actuales usan un tag `<spells>Lista de hechizos</spells>`. Se recomienda esta estructura más detallada).*
*   **`<equipment>`**: (Opcional) Lista de equipo notable que lleva el monstruo.
    *   **`<item_entry name="[ItemName]" quantity="[numero]"/>`**
*   **`<environment_tags tags="[tag1,tag2,...]"/>`**: (Opcional) Etiquetas de entorno donde se encuentra comúnmente (ej: "forest", "underdark", "urban").
    *   *(Nota de Discrepancia (Monstruos): Los XML actuales usan un tag `<environment>texto libre</environment>`. Se recomienda usar etiquetas para facilitar filtros).*

---
### **Etiquetas Específicas para Objetos (Items)**
---

**`<item>`**
Contenedor raíz para la definición de un objeto, ya sea mundano o mágico.
    *   *Nota de Discrepancia (Objetos): Los archivos XML de objetos actuales (ej: `items-phb24.xml`) son muy planos, con la mayoría de los detalles mecánicos y propiedades en texto. El siguiente esquema propone una estructura más detallada, especialmente para armas, armaduras y herramientas, para alinearlos con el enfoque estructurado del resto del glosario.*

*   **`<name>[NombreDelObjeto]</name>`**: Nombre completo del objeto (ej: "Longsword [2024]", "Potion of Healing [2024]").
*   **`<source book="[NombreLibro]" page="[numero]" other_sources="[otras_fuentes]"/>`**: Información de la fuente.
*   **`<description_text>`**: (Opcional) Descripción general o lore del objeto.
*   **`<item_type main="[Weapon|Armor|Shield|Tool|Gear|Currency|MagicItem|Potion|Scroll|Wand|Rod|Staff|Ring|WondrousItem]" sub="[subtipo_especifico]"/>`**: Categorización del objeto.
    *   `main`: Categoría principal del objeto.
    *   `sub` (opcional): Subtipo más específico (ej: para Weapon: "SimpleMelee", "MartialRanged"; para Tool: "ArtisansTools", "GamingSet"; para MagicItem: "Weapon", "Armor", "Wondrous").
*   **`<rarity type="[Common|Uncommon|Rare|VeryRare|Legendary|Artifact|Varies]"/>`**: (Para objetos mágicos, o si aplica a otros).
*   **`<attunement required="[true|false]" prerequisites="[texto_prerrequisitos_si_los_hay]"/>`**: (Para objetos mágicos).
*   **`<value amount="[numero]" currency="[GP|SP|CP|etc.]"/>`**: Costo del objeto.
*   **`<weight amount="[numero]" unit="[lb|oz|none]"/>`**: Peso del objeto.
*   **`<stackable size="[numero]"/>`**: (Opcional) Si el objeto se apila y cuántos caben en una "ranura" o unidad de inventario.

*   **Si `item_type main="Weapon"`:**
    *   **`<weapon_details category="[Simple|Martial]" type="[Melee|Ranged]"`**:
        *   **`<damage dice="[formula_dado]" type="[Bludgeoning|Piercing|Slashing|...]" versatile_dice="[formula_dado_versatil]"/>`**: (Repetible para múltiples tipos de daño si es necesario).
            *   `versatile_dice` (opcional): Dado de daño si se usa con dos manos (para armas versátiles).
        *   **`<properties>`**: Contenedor para propiedades del arma.
            *   **`<property name="[PropertyName]" value="[valor_si_aplica]"/>`** (Repetible). Ejemplos:
                *   `<property name="Ammunition" ammo_type="[Arrow|Bolt|Needle|SlingBullet|FirearmBullet]" range_short="[X]" range_long="[Y]"/>`
                *   `<property name="Finesse"/>`
                *   `<property name="Heavy" strength_requirement="[13|15]"/>`
                *   `<property name="Light"/>`
                *   `<property name="Loading"/>`
                *   `<property name="Reach"/>`
                *   `<property name="Thrown" range_short="[X]" range_long="[Y]"/>`
                *   `<property name="TwoHanded"/>`
                *   `<property name="Versatile"/>`
                *   `<property name="Special" description="[descripcion_propiedad_especial]"/>`
        *   **`<mastery_options>`**: (Opcional) Contenedor para propiedades de maestría de armas disponibles.
            *   **`<mastery name="[MasteryName]" default="[true|false]"/>`** (Repetible. Ej: "Topple", "Vex", "Sap", "Push", "Slow", "Nick", "Graze", "Cleave").
                *   `default`: "true" si es la maestría por defecto para este tipo de arma.
                *   *(Nota: Las mecánicas de cada maestría deberían definirse globalmente o referenciarse, o detallarse aquí con sub-etiquetas de efecto si es necesario).*
        *   **`<proficiency_requirement text="[simple|martial|specific_weapon_name]"/>`**: Qué competencia se necesita para usarla.

*   **Si `item_type main="Armor"` o `main="Shield"`:**
    *   **`<armor_details category="[Light|Medium|Heavy|Shield]"`**:
        *   **`<armor_class base="[numero]" add_dex_modifier="[true|false]" max_dex_bonus="[numero_o_none]"/>`**:
            *   `max_dex_bonus`: "none" si no hay límite.
        *   **`<strength_requirement value="[numero]"/>`** (opcional).
        *   **`<stealth_disadvantage value="[true|false]"/>`**.
        *   **`<don_time description="[texto_tiempo_ponerse]"/>`** (opcional).
        *   **`<doff_time description="[texto_tiempo_quitarse]"/>`** (opcional).

*   **Si `item_type main="Tool"`:**
    *   **`<tool_details category="[ArtisansTools|GamingSet|MusicalInstrument|Other]"`**:
        *   `category`: Categoría general de la herramienta.
        *   **`<associated_ability name="[AbilityName]"/>`** (opcional): Habilidad comúnmente usada con esta herramienta.
        *   **`<utilization_options>`**: (Opcional) Usos comunes de la herramienta.
            *   **`<option description="[texto_uso]" dc="[numero]" check_ability="[AbilityName]" check_skill="[SkillName]"/>`** (Repetible).
        *   **`<craftable_items>`**: (Opcional) Objetos que se pueden crear con esta herramienta.
            *   **`<item_ref name="[ItemName]"/>`** (Repetible).

*   **Si `item_type main="Gear"` o `main="Potion"`, etc.:**
    *   **`<effects>`**: (Opcional, especialmente para pociones o equipo con efectos mecánicos).
        *   Contiene etiquetas de `<action>`, `<effect>`, `<uses>`, `<recharge>` similares a las de características/dotes para describir sus mecánicas.
    *   **`<capacity value="[numero]" unit="[pints|gallons|pounds|cubic_feet]" description="[texto_capacidad]"/>`**: (Opcional) Para contenedores.
    *   **`<consumable charges="[numero]" on_last_charge_behavior="[destroyed|becomes_mundane|roll_on_table]"/>`**: (Opcional) Para objetos consumibles o con cargas.

*   **`<text_full>`**: (Opcional) Para incluir el texto completo original del objeto si la estructura anterior no captura todos los matices o para referencia. Se recomienda que la información mecánica esté en las etiquetas estructuradas.

---

Este glosario debería cubrir la gran mayoría de las estructuras para clases, dotes, razas, trasfondos y ahora hechizos. Es un sistema detallado y se espera que sea de gran ayuda para el parseo y la utilización de estos datos.
Cualquier nueva mecánica encontrada que no encaje claramente en estas etiquetas deberá ser analizada para determinar si se requiere una nueva etiqueta o una extensión de una existente.
La consistencia en la aplicación de estas etiquetas es clave para la mantenibilidad y utilidad del compendio XML.
