## Glosario de Etiquetas XML para D&D 5e (v1.2)

Este documento detalla las etiquetas XML y atributos utilizados para estructurar características de clase, dotes (feats), razas, trasfondos (backgrounds) y objetos (items), basado en el trabajo realizado hasta la V2 de `feature/structure-class-features-xml`, la revisión de dotes de PHB24, la estructuración de razas de PHB24, la revisión de trasfondos de PHB24 y la estructuración de objetos de DMG24.

---
### **Etiquetas Principales (Contenedores Raíz)**
---

**`<class>`**
Contenedor raíz para una definición de clase.
*   **`<name>`**: Nombre de la clase.
*   **`<source page="[numero]">Player's Handbook 2024</source>`**: (Recomendado) Información de la fuente.
*   **`<hd>`**: Dado de golpe (Hit Die) de la clase (ej: 8, 10, 12).
*   **`<proficiency>`**: (Legado/Provisional) Lista textual de competencias en tiradas de salvación y habilidades iniciales. (Nota: Reemplazar por etiquetas más estructuradas como `<saving_throw_proficiencies>` y `<skill_proficiencies_options>`).
*   **`<numSkills>`**: (Legado/Provisional) Número de habilidades a elegir de la lista de competencias.
*   **`<armor>`**: (Legado/Provisional) Lista textual de competencias en armaduras. (Nota: Reemplazar por `<armor_proficiencies>`).
*   **`<weapons>`**: (Legado/Provisional) Lista textual de competencias en armas. (Nota: Reemplazar por `<weapon_proficiencies>`).
*   **`<tools>`**: (Legado/Provisional) Lista textual de competencias en herramientas. (Nota: Reemplazar por `<tool_proficiencies_options>`).
*   **`<spellAbility>`**: Característica principal para el lanzamiento de conjuros (ej: Wisdom, Charisma, Intelligence).
*   **`<slotsReset>`**: Cuándo se reinician los espacios de conjuro (ej: L para Long Rest, S para Short Rest). (Nota: Más relevante para Pact Magic de Warlock).
*   **`<autolevel level="X">`**: Contenedor para características y cambios que ocurren en un nivel específico "X" de la clase.
    *   **`scoreImprovement="YES"`** (atributo opcional): Indica que en este nivel se ofrece una Mejora de Puntuación de Característica (ASI).
    *   **`<slots>`** (opcional): Define los espacios de conjuros por nivel de conjuro para este nivel de clase (ej: `<slots>2,3</slots>` para 2 de nivel 1, 3 de nivel 2).
    *   **`<feature optional="YES|NO">`**: Define una característica de clase. (Ver sección `<feature>` / `<trait>` más abajo).
        *   **`<subclass>`** (opcional): Nombre de la subclase a la que pertenece esta característica.
    *   **`<counter>`** (opcional): Para rastrear usos de características (ej: Indomitable).
        *   **`<name>`**: Nombre del contador.
        *   **`<value>`**: Valor inicial.
        *   **`<reset>`**: Cuándo se resetea (S: Short Rest, L: Long Rest, Dawn: Amanecer).

**`<feat>`**
Contenedor raíz para la definición de un dote.
*   **`<name>`**: Nombre del dote.
*   **`<source page="[numero]">Player's Handbook 2024</source>`**: Información de la fuente.
*   **`repeatable="true|false"`** (opcional, default `false`): Si el dote puede ser tomado múltiples veces.
    *   `<repeatable_note condition="[texto_condicion]">` (si `repeatable="true"`).
*   **`origin_feat="true|false"`** (opcional, default `false`): Si es un dote de origen.
*   **`<prerequisite>`**: Condiciones para tomar el dote. (Ver sección `<prerequisite>`).
*   **`<benefit name="[BenefitName]">`**: Beneficio específico del dote. (Ver sección `<benefit>`).
*   **`<text>`**: (Legado) Descripción textual completa. Reemplazar con etiquetas estructuradas.
*   **`<modifier>`**: (Legado) Reemplazar con etiquetas semánticas dentro de `<benefit>`.

**`<race>`**
Contenedor raíz para la definición de una raza.
*   **`<name>`**: Nombre de la raza (ej: "Aasimar [2024]", "Elf, Drow [2024]").
*   **`<source page="[numero]">Player's Handbook 2024</source>`**: Información de la fuente.
*   **`<size_summary code="[S|M|L|T|G|H]"/>`**: Código de tamaño resumido (ej: M, S). El detalle y opciones van en un `<trait name="Size">`.
*   **`<speed base="[numero_pies]"/>`**: Velocidad base de movimiento terrestre. Otras velocidades (vuelo, nado) se definen en traits.
*   **`<spellcasting_ability default="[AbilityName]"/>`** (opcional): Habilidad de lanzamiento por defecto para conjuros raciales si no se especifica otra cosa en un `<trait>` o `<grants_spell_learning>`.
*   **`<trait name="[TraitName]" ...>`**: Define una característica racial. (Ver sección `<feature>` / `<trait>` más abajo).

---
### **Etiquetas de Características (Común a Clases, Dotes, Razas)**
---

**`<feature optional="YES|NO">`** (Usado dentro de `<class>`) / **`<benefit name="[BenefitName]">`** (Usado dentro de `<feat>`) / **`<trait name="[TraitName]" category="[category_type]" gained_at_character_level="[numero]">`** (Usado dentro de `<race>`)

Estas etiquetas sirven como contenedores para las descripciones y mecánicas de una característica específica, un beneficio de dote, o un rasgo racial. Comparten muchas sub-etiquetas comunes.

*   **Para `<trait>` (racial):**
    *   **`name`**: Nombre del rasgo racial.
    *   **`category`**: Ayuda a organizar y categorizar los rasgos raciales.
        *   `description`: Lore general, edad, alineamiento, etc. (principalmente `<text>`).
        *   `core`: Rasgos fundamentales como Tipo de Criatura, Tamaño detallado.
        *   `species`: Rasgos comunes a la especie principal antes de cualquier elección de linaje/subraza.
        *   `lineage`: Rasgos específicos de un linaje o subraza (ej. Drow Lineage, Fiendish Legacy).
        *   `ancestry_choice`: Para rasgos que presentan una elección mayor basada en la ascendencia y que pueden afectar otros rasgos (ej. Draconic Ancestry del Dragonborn).
    *   **`gained_at_character_level="[numero]"`** (opcional): Para rasgos que se activan o se obtienen en un nivel de personaje específico. (Nota: Para `<feature>` de clase, el nivel se define en `<autolevel>`. Para `<benefit>` de dote, se usa `<prerequisite>`).
*   **Contenido común:** `<name>`, `<text>` (descripción textual), y luego etiquetas estructuradas como:
    *   `<action>`, `<choice>`, `<cost>`, `<duration>`, `<effect>`, `<grants_ability_score_increase>`, `<grants_proficiency>`, `<grants_spell_learning>`, `<modifies_action>`, `<modifies_rule>`, `<modifies_spell>`, `<resource_pool>`, `<resource>`, `<uses>`, `<recharge>`, `<restriction>`, `<note>`, etc. (Detalladas más abajo).

**`<prerequisite>`** (Usado dentro de `<feat>`, o potencialmente dentro de `<feature>`/`<trait>` si una característica tiene prerrequisitos específicos)
*   **`<level min="[numero]"/>`**: Nivel mínimo de personaje (para dotes) o de clase (si dentro de una clase).
*   **`<ability_score name="[AbilityName]" min="[numero]"/>`**.
*   **`<proficiency type="[Armor|WeaponCategory|Feature|Tool|Skill]" name="[SpecificName]" present="true|false"/>`**.
*   **`<spellcasting present="true|false"/>`**: Prerrequisito de tener la capacidad de lanzar conjuros.
*   **`<or_conditions>` / `<and_conditions>`**: Para agrupar condiciones.
*   **`text_override="[texto_complejo]"`**: Para prerrequisitos textuales complejos.

---
### **Etiquetas Detalladas (Sub-etiquetas comunes dentro de `<feature>`, `<benefit>`, `<trait>`)**
---

**`<action type="[ActionType]" (otros atributos)>`**
*   **`type`**: `Action`, `BonusAction`, `Reaction`, `MagicAction`, `Free`, `NoAction`, `Special`, `Utilize` (para usar ítems como parte de la acción), `PartOfAttackAction`, `ImmediatelyFollowingAttack`, `Ritual`.
*   **`name_override="[texto]"`**: Si la acción es una versión especial de una acción estándar (ej: `type="BonusAction" name_override="Dash"` para Adrenaline Rush del Orco).
*   **`to_assume_form="true"`**, **`to_leave_form="true"`**, **`to_manifest="true"`**, **`to_move_area="true"`**.
*   **`duration="[texto]"`** (para la acción en sí, ej. ritual).
*   **`timing="[texto]"`**.
*   **`trigger="[texto_disparador]"`** (especialmente para Reacciones o acciones con disparadores específicos).

**`<asi_options>`** (Dentro de un `<feature scoreImprovement="YES">` o un dote ASI)
*   **`<option description="[texto]">`**.

**`<choice name="[ChoiceName]" count="[number]" (otros atributos)>`**
*   **`from_list="[lista_separada_por_comas_o_pipa]"`**.
*   **`from_table_ref="[TableName]"`**.
*   **`trigger="[texto]"`** (ej: "each_time_you_transform" para Celestial Revelation).
*   **`<option name="[OptionName]" description_text="[texto descriptivo de la opción]">`**:
    *   `description_text`: Usado para describir la opción si no hay sub-etiquetas complejas.
    *   Puede contener `<text>` para descripción más larga, y luego `<effect>`, `<action>`, `<cost>`, etc.
    *   **`type="Feat"`**: Si la opción es elegir un dote.
    *   **`grants_damage_type_option="[DamageType]"`**: Si la opción define un tipo de daño a elegir.
    *   **`<effect type="DamageTypeAssociation" value="[DamageType]" for_trait="[TraitName1,TraitName2]"/>`**: (Específico para Razas/AncestryChoice) Asocia un tipo de daño con esta opción, que puede ser referenciado por otros traits.
*   **`<recharge type="[SR|LR|Dawn|Other]" description="[texto]"`**: Si la habilidad de cambiar la elección se recarga.

**`<grants_ability_score_increase>`**
*   **`<fixed_ability name="[AbilityName]" value="[+N]" max="[20|22]"/>`**.
*   **`<choice_from_abilities list="[STR|DEX|...|any]" count="[N]" value_per_choice="[+N]" total_increase="[+N]" max="[20|22]"/>`**.

**`<cost (atributos)>`**
*   **`resource="[ResourceName|ItemName|HitDice]"`**.
*   **`value="[number|any|variable|ProficiencyBonus]"`, `value_formula="[formula]"`**.
*   ... (otros atributos como en la v1) ...

**`<duration description="[texto|formula]" (otros atributos)>`**
*   **`ends_early_if="[condicion1,condicion2,dismissed_no_action,Incapacitated_condition]"`**: Lista de condiciones separadas por coma.

**`<effect (atributos)>`**
*   **`type`**: `Damage`, `Heal`, `Bonus`, `Advantage`, `Disadvantage`, `Condition`, `Movement`, `Speed`, `SpeedIncrease` (puede incluir `new_total_speed`), `SpeedReduction`, `Resistance`, `Immunity`, `Cover`, `ACBonus`, `DamageReduction`, `DamageBonus`, `ExtraDamage`, `Teleport`, `Detection`, `Sense` (para Darkvision, Blindsight, Tremorsense), `CreateArea`, `CreateWard`, `Transformation` (puede incluir `new_size`), `Buff`, `Debuff`, `GainTemporaryHitPoints`, `HitPointMaximumIncrease`, `HitPointIncrease` (fijo o por nivel), `AbilityScoreIncrease`, `ReachIncrease`, `DispelMagic`, `Revive`, `RollBonus`, `SizeCategory` (para el trait de Tamaño), `GainResource`, `SetHitPoints`.
*   **Para `type="Sense"`**:
    *   **`name="[Darkvision|Blindsight|Tremorsense]"`**.
    *   **`range="[numero_pies]"`**.
    *   **`upgrades_existing="true"`** (opcional, si mejora un sentido existente, ej: Drow Darkvision).
    *   **`<condition text="[texto_condicion_para_el_sentido]"/>`** (opcional, ej: para Tremorsense del Enano).
*   **Para `type="HitPointMaximumIncrease"`**:
    *   **`value_formula="[formula]"`** (ej: `max(1,character_level)` para Enano, o `2*character_level` para Dote Tough).
    *   **`description="[texto_explicativo]"`** (opcional).
*   **Para `type="Resistance"` / `type="Immunity"`**:
    *   **`damage_types="[type1,type2,...]"`**.
    *   **`damage_types_ref="[TraitNameReferencia]"`**: (Específico para Razas/AncestryChoice) El tipo de daño se determina por una elección hecha en otro trait (ej: Draconic Resistance).
*   **Para `type="Damage"` / `type="ExtraDamage"`**:
    *   **`damage_type_ref="[TraitNameReferencia]"`**: Similar a `damage_types_ref` para Resistencia.
    *   **`area_shape="[texto_forma_area]"`** (ej: "15-foot_Cone", "30-foot_Line_5_feet_wide").
    *   **`<scaling level="X" dice="[nuevo_dado]" value="[nuevo_valor]"/>`**: (Nota: Para razas, `level` se refiere a nivel de personaje).
*   **`<condition text="[texto_condicion_para_el_efecto]"/>`** (anidada, si el efecto solo aplica bajo cierta condición).
*   ... (otros atributos y sub-etiquetas como en la v1, incluyendo `save_type`, `save_dc`, `save_effect`, `target_description`, etc.) ...
*   **`<on_failed_save (atributos_de_effect)>`**: Efecto si se falla una tirada de salvación.
*   **`<on_successful_save (atributos_de_effect)>`**: Efecto si se tiene éxito en una tirada de salvación.
*   **`<on_hit (atributos_de_effect)>`**: Efecto si un ataque impacta.
*   **`<on_condition condition="[texto_condicion]"> (atributos_de_effect) </on_condition>`**: Efecto que ocurre bajo una condición específica.

**`<enhancements>` / `<enhances_feature feature_name="[FeatureName]" (otros atributos)>` / `<enhances_ability ability_name="[AbilityName]">`**
Define cómo una característica mejora otra característica o habilidad existente.
*   **`feature_name`**: Nombre de la característica principal que se mejora.
*   **`ability_name`**: Nombre de la habilidad específica (ej: Flurry of Blows) que se mejora.
*   **`benefit_name="[BenefitName]"`** (opcional): Si mejora un beneficio específico dentro de una característica.
*   **`<enhancement_option for_choice="[OptionName]">`**: Si la mejora aplica a una opción específica de una característica con elecciones.
    *   Contiene etiquetas `<effect>`, `<modifies_effect>`, etc., que describen la mejora.
*   **`<modifies_effect type="[TypeName]" new_value="[valor]" new_value_formula="[formula]" new_value_dice="[dado]"/>`**: Modifica un efecto existente.
*   **`<modifies_trigger new_damage_types_affected="[any_damage_type|lista]"/>`**: Cambia el disparador de un efecto.
*   **`<modifies_aura_property property="[radius|etc.]" new_value="[valor]"/>`**: Cambia una propiedad de un aura.
*   **`<modifies_rule rule_name="[RuleName]" new_basis="[texto]" new_formula="[formula]"/>`**: Modifica una regla de juego.
*   **`<benefit_while_active>`**: Para beneficios que se añaden mientras otra cosa está activa.
*   **`<additional_benefit>`**: Para beneficios adicionales directos.
*   **`<alternative_activation_cost>`**: Ofrece una forma alternativa de activar la característica mejorada.

**`<grants_proficiency type="[Skill|Weapon|Armor|Tool|SavingThrow|Language]" (otros atributos)>`**
*   **`type`**: Tipo de competencia (`Skill`, `Tool`, `Weapon`, `Armor`, `SavingThrow`, `Language`, `WeaponProperty`).
*   **`name="[NombreEspecifico]"`** (ej: "Insight", "Cook's Utensils", "Martial Weapons", "Light Armor", "Strength", "Druidic", "Loading").
*   **`choice_from_list="[lista_opciones_separadas_por_coma_o_pipa|any|any_artisans_tool|any_musical_instrument|any_skill_or_tool|specific_table_name]"`**: Si se elige de una lista.
    *   `any`: Para una elección de cualquier habilidad, herramienta, idioma, etc., según el `type`.
    *   `any_skill_or_tool`: Permite elegir entre cualquier habilidad o cualquier herramienta.
    *   `specific_table_name`: Referencia a una `<inline_table>` definida en otra parte del dote/característica que lista las opciones.
*   **`count="[numero]"`**: Cuántas competencias se otorgan/eligen.
*   **`expertise="true|false"`** (opcional, default `false`).
*   **`ignore_property="true|false"`** (opcional, para `type="WeaponProperty"`).
*   **`proficiency_or_expertise="true|false"`** (opcional).

**`<grants_spell_learning>`**
*   **`type="[Cantrip|Spell]"`**.
*   **`spell_known="[SpellName]"`**.
*   **`count="[numero|ProficiencyBonus]"`**.
*   **`spell_list_choice="[Cleric|Druid|Wizard|...|AnyRitualLevel1]"`**.
*   **`spell_level="[numero]"`** (opcional, nivel del conjuro).
*   **`gained_at_character_level="[numero]"`** (especialmente para conjuros raciales).
*   **`spellcasting_ability_choice="[Intelligence|Wisdom|Charisma]" count="1"`**.
*   **`spellcasting_ability_fixed="[Intelligence|Wisdom|Charisma]"`**.
*   **`spellcasting_ability_choice_ref="[TraitNameDeLaEleccion]"`**: Si la habilidad de lanzamiento se eligió en otro trait (ej: linajes de Elfos/Tieflings).
*   **`always_prepared="true|false"`**.
*   **`counts_against_known="true|false"`**.
*   **`can_use_spell_slots="true|false"`**.
*   **`free_casts_per_rest type="[LongRest|ShortRest|Dawn]" count="[numero|formula]"`**.
    *   `count_formula="[ProficiencyBonus]"`
*   **`can_replace_on_long_rest="true|false"`** (ej: High Elf cantrip).
*   **`replacement_spell_list="[Wizard|etc.]"`** (si `can_replace_on_long_rest="true"`).
*   **`no_components_list="[Verbal|Somatic|Material|...]"`.**
*   **`ritual_casting_only="true|false"`**.
*   **`<spell_modifications>`**:
    *   **`<range_increase value="[+X_feet|double]"/>`**
    *   **`<make_invisible="true"/>`**
    *   **`<duration_override description="[nueva_duracion_texto]"/>`**
*   **`<alternative_grant condition="[texto]" description="[texto_alternativa]"/>`**.

**`<grants_always_prepared_spell name="[SpellName]" (otros atributos)>`**
*   **`name`**: Nombre del conjuro.
*   **`level_gained_at="[numero]"`** (nivel de clase).

**`<grants_feat type="[FightingStyle|EpicBoon|AbilityScoreImprovement|Any|OriginFeat]" count="[number]" recommendation="[FeatName]">`**
*   **`recommendation`** (opcional): Si se recomienda un dote específico.

**`<inline_table name="[TableName]">`**
*   **`<header><col label="[HeaderText1]"/><col label="[HeaderText2]"/></header>`**.
*   **`<row><cell value="[CellText1]"/><cell value="[CellText2]"/></row>`**.

**`<modifies_action action_name="[Attack|Dash|Hide|Study|Search|StandUp|etc.]" (otros atributos)>`**
*   **`new_attacks_allowed="[numero]"`**.
*   **`new_condition_text="[texto]"`**: Para modificar cuándo o cómo se puede usar una acción (ej: Halfling Naturally Stealthy).
*   **`<option_to_replace_attack count="[numero_ataques_a_reemplazar]">`**.
    *   **`<effect description="[texto_efecto_reemplazo]"/>`**.

**`<modifies_spell spell_name="[SpellName]" (otros atributos)>` / `<modifies_spell_casting (atributos)>`**
*   ... (atributos como en la v1) ...

**`<modifies_rule rule_name="[RuleName]" (otros atributos)>`**
*   **`rule_name`**: `CriticalHitRange`, `ArmorClassCalculation`, `UnarmedStrikeDamage`, `DeathSavingThrowResult`, `SleepRequirement`, `MagicalSleep`, `LongRestDuration`, `MovementThroughHostileSpace`, `CarryingCapacity`, etc.
*   **`effect_description="[texto_del_cambio_a_la_regla]"`**: Descripción textual de la modificación.
*   ... (otros atributos como en la v1) ...

**`<resource_pool name="[ResourceName]" (otros atributos)>`**
*   **`value_formula="[ProficiencyBonus|AbilityModifier|FixedNumber|CharacterLevel|ClassLevel]"`**: (Clarificar si es nivel de personaje o clase).
*   ... (atributos como en la v1) ...

**`<resource name="[ResourceName]" (otros atributos)>`**
*   **`value_formula="[formula]"`** (ej: "5*PaladinLevel", "CharacterLevel").
*   **`count_formula="[formula]"`** (ej: "1+WarlockLevel", "ProficiencyBonus").
*   **`<count initial="[numero]"> <scaling level="X" count="[nuevo_numero]"/> </count>`**: `level` es nivel de clase aquí.
*   **`<scaling_table name="[TableName]"> <level val="X" die_size="[dY]" number="[Z]"/> </scaling_table>`**: `val` es nivel de clase.
*   ... (otros atributos como en la v1) ...

**`<trigger text="[texto_disparador]">`**
*   **`text`**: (ej: "when_you_hit_a_creature_with_an_attack_roll", "when_reduced_to_0_HP_but_not_killed_outright").

**`<uses (atributos)>`**
*   **`fixed="[numero]"`**, **`attribute="[AbilityName|ProficiencyBonus]"`**.
*   **`min="[numero]"`**.
*   **`<recharge type="[SR|LR|SR_or_LR|Dawn|Special]" description="[texto]"/>`**.
*   **`<scaling level="X" uses="[nuevo_numero]"/>`**: `level` es nivel de clase o personaje según contexto (feature vs trait).
*   ... (otros atributos como en la v1) ...
*   **Nota:** Para `<scaling level="X">` dentro de un `<trait>` racial, `level` se refiere al nivel total del personaje.

**`<restriction text="[texto_restriccion]">`**
**`<note text="[texto_nota]">`**

**`<equipment_requirements (atributos)>`** (Legado, se busca reemplazar)
*   ... (atributos como en la v1) ...

---
### **Etiquetas Específicas de Dotes (Feats) y Mecánicas Detalladas**
---

**`<action_option name="[ActionName]"`** (Dentro de `<benefit>` o `<trait>` que otorga una acción específica)
Define un beneficio que es una acción específica o modifica una acción existente.
*   **`name`**: Nombre descriptivo de la acción/beneficio (ej: "Battle Medic", "Telekinetic Shove", "AdrenalineRushDash").
*   **`type`**: (Ver etiqueta `<action>` para valores comunes).
*   **`name_override="[Dash|etc.]"`**: Si la acción es una versión especial de una acción estándar.
*   **`trigger="[texto_disparador]"`**.
*   **`uses_per_turn="[numero]"`** (opcional).
*   **`uses_per_rest type="[SR|LR|Dawn]" count="[numero|formula]"`** (opcional).
*   **`<cost resource="[ResourceName|ItemName]" .../>`** (opcional).
*   **`<range value="[numero_pies|self|touch|weapon_reach]"/>`** (opcional).
*   **`<target description="[texto_descripcion_objetivo]"/>`** (opcional).
*   **`<duration description="[texto_duracion]"/>`** (opcional).
*   Puede contener etiquetas `<effect>`, `<choice>`, etc.

**`<passive_effect>`** (Dentro de `<benefit>` o `<trait>`)
Define un beneficio que está siempre activo o se aplica automáticamente bajo ciertas condiciones.
*   **`description="[Texto descriptivo breve si es necesario]"`**.
*   Puede contener `<effect>`, `<modifies_rule>`, `<grants_proficiency>`, etc.

**`<reroll_option>`** (Dentro de `<benefit>` o `<trait>`)
*   **`dice_condition="[rolls_a_1|rolls_below_X|any]"`**.
*   **`on_roll_for="[any_D20_Test|healing_spell_or_ability|...|any_damage_roll_for_spell]"`**.
*   ... (otros atributos como en la v1) ...

**`<crafting_option name="[CraftingBenefitName]">`**
*   ... (atributos como en la v1) ...

**`<discount_benefit item_type="[nonmagical|any]" value_percentage="[numero]">`**
*   ... (atributos como en la v1) ...

**`<special_movement name="[MovementName]">`**
*   ... (atributos como en la v1) ...

**`<special_jump name="[JumpingBenefitName]">`**
*   ... (atributos como en la v1) ...

**`<weapon_property_interaction>`**
*   ... (atributos como en la v1) ...

**`<damage_reduction>`**
*   ... (atributos como en la v1) ...

**`<saving_throw_modification>`**
*   ... (atributos como en la v1) ...

**`<concentration_effect>`**
*   ... (atributos como en la v1) ...

**`<reactive_spell_cast>`**
*   ... (atributos como en la v1) ...

**`<somatic_component_allowance description="[texto]">`**
*   ... (atributos como en la v1) ...

**`<weapon_mastery_option name="[MasteryName]">`**
*   ... (atributos como en la v1) ...

**`<blindsight_grant range="[numero_pies]">`**
*   ... (atributos como en la v1) ...

**`<stealth_enhancement>`**
*   ... (atributos como en la v1) ...

**`<hidden_attack_rule description="[texto]">`**
*   ... (atributos como en la v1) ...

**`<speed_increase_static value="[numero_pies]">`**
*   ... (atributos como en la v1) ...

**`<difficult_terrain_interaction condition="[texto_condicion]" effect_description="[texto_efecto]">`**
*   ... (atributos como en la v1) ...

**`<opportunity_attack_modification>`**
*   ... (atributos como en la v1) ...

**`<cover_interaction type="[ranged_weapon_attacks|spell_attack_rolls]" ignores_cover="[HalfCover|ThreeQuartersCover|TotalCover]"/>`**
*   ... (atributos como en la v1) ...

**`<long_range_interaction type="[ranged_weapon_attacks]" no_disadvantage_at_long_range="true"/>`**
*   ... (atributos como en la v1) ...

**`<spell_range_increase condition="[texto_condicion_conjuro]" increase_by="[+X_feet|double]"/>`**
*   ... (atributos como en la v1) ...

**`<shield_bash_option>`**
*   ... (atributos como en la v1) ...

**`<shield_interpose_option>`**
*   ... (atributos como en la v1) ...

**`<telepathic_communication range="[numero_pies]">`**
*   ... (atributos como en la v1) ...

**`<repeatable_note condition="[texto_condicion_para_repetir]">`**
*   ... (atributos como en la v1) ...

---
### **Sección Específica para Razas (Adiciones/Clarificaciones)**
---

**`<race>` (Contenedor Raíz)**
*   Como se describió en "Etiquetas Principales".
*   Debe contener una serie de etiquetas `<trait>`.

**`<size_summary code="[S|M|L]"/>`**
*   **Uso:** Hijo directo de `<race>`.
*   **Descripción:** Proporciona un código de tamaño resumido para la raza (ej: 'M' para Mediano, 'S' para Pequeño).
*   **Atributos:**
    *   `code`: El código de tamaño (S, M, L, T, G, H).
*   **Nota:** El tamaño detallado, incluyendo opciones si las hay (ej: Aasimar puede ser Mediano o Pequeño), se define dentro de un `<trait category="core" name="Size">` utilizando `<choice>` y `<effect type="SizeCategory">`.

**`<speed base="[numero_pies]"/>`**
*   **Uso:** Hijo directo de `<race>`.
*   **Descripción:** Define la velocidad base de movimiento terrestre de la raza.
*   **Atributos:**
    *   `base`: La velocidad en pies (ej: "30").
*   **Nota:** Otras velocidades (vuelo, nado, escalada, excavación) o modificaciones a la velocidad base se definen a través de `<effect type="Speed">` o `<effect type="SpeedIncrease">` dentro de los `<trait>` correspondientes.

**`<trait name="[TraitName]" category="[description|core|species|lineage|ancestry_choice]" gained_at_character_level="[numero]">`**
*   **Uso:** Hijo directo de `<race>`. Es la etiqueta fundamental para cada característica racial.
*   **Atributos:**
    *   `name`: Nombre del rasgo (ej: "Darkvision", "Fey Ancestry", "Drow Lineage").
    *   `category`:
        *   `description`: Para el lore general, edad, alineamiento, apariencia física, etc. Usualmente contendrá principalmente la etiqueta `<text>`.
        *   `core`: Para rasgos fundamentales de la raza que no son opcionales y definen su naturaleza básica, como "Creature Type" o el "Size" detallado (que puede incluir una elección).
        *   `species`: Para rasgos comunes a la especie principal antes de cualquier elección de linaje o subraza (ej: Darkvision base de un Elfo, antes de la mejora Drow).
        *   `lineage`: Para rasgos que son específicos de un linaje, subraza o variante particular de la raza (ej: "Drow Lineage", "Forest Lineage" para Gnomos, "Fiendish Legacy" para Tieflings). Las razas con linajes se definen como entradas `<race>` separadas (ej: `<name>Elf, Drow [2024]</name>`).
        *   `ancestry_choice`: Para rasgos que presentan una elección principal basada en la ascendencia y que pueden tener efectos que influyen en otros rasgos (ej: "Draconic Ancestry" del Dragonborn, "Giant Ancestry" del Goliath). Estas elecciones se definen usando la etiqueta `<choice>`.
    *   `gained_at_character_level="[numero]"` (opcional): Si el rasgo, o una parte significativa de él, solo se obtiene cuando el personaje alcanza un cierto nivel total.
*   **Contenido:** Puede contener `<text>` para la descripción completa, y luego una combinación de etiquetas estructuradas del glosario como `<effect>`, `<action>`, `<choice>`, `<grants_spell_learning>`, `<grants_proficiency>`, `<uses>`, `<recharge>`, `<modifies_rule>`, etc., para definir la mecánica del rasgo.
*   **Nota sobre `<scaling>`:** Cuando la etiqueta `<scaling level="X" .../>` se usa dentro de un `<trait>` racial, el atributo `level="X"` se refiere al nivel total del personaje, no a un nivel de clase.

**`<effect type="DamageTypeAssociation" value="[DamageType]" for_trait="[TraitName1,TraitName2]"/>`**
*   **Uso:** Dentro de una `<option>` de un `<choice>` en un `<trait category="ancestry_choice">`.
*   **Descripción:** Asocia un tipo de daño específico con la opción elegida. Este tipo de daño puede ser referenciado por otros rasgos de la misma raza.
*   **Atributos:**
    *   `value`: El tipo de daño (ej: "Acid", "Fire", "Cold").
    *   `for_trait`: Lista separada por comas de los nombres de otros traits que utilizarán este tipo de daño (ej: "Breath Weapon,Damage Resistance" para Dragonborn).
*   **Referencia en otros traits:** Otros traits pueden referenciar este tipo de daño usando atributos como `damage_type_ref="[NombreDelTraitDeEleccionDeAscendencia]"` en sus etiquetas `<effect type="Damage">` o `<effect type="Resistance">`. (Ej: `<effect type="Resistance" damage_types_ref="Draconic Ancestry"/>`).

**`<effect type="SizeCategory" value="[Small|Medium|Large|...]" description_text="[texto descriptivo opcional]"/>`**
*   **Uso:** Generalmente dentro de una `<option>` de un `<choice>` en un `<trait name="Size">`.
*   **Descripción:** Define la categoría de tamaño del personaje.
*   **Atributos:**
    *   `value`: La categoría de tamaño (ej: "Medium", "Small").
    *   `description_text` (opcional): Texto breve que describe las dimensiones típicas para ese tamaño (ej: "about 4-7 feet tall").

**Clarificación para `<grants_spell_learning>` en Razas:**
*   `gained_at_character_level="[numero]"`: Usar este atributo para indicar cuándo se obtiene el conjuro.
*   `spellcasting_ability_choice_ref="[NombreDelTraitDeLinaje]"`: Si la habilidad de lanzamiento para un conjuro se determina por una elección hecha en el trait de linaje (ej: "Fiendish Legacy (Abyssal)"), este atributo puede referenciar el nombre de ese trait donde se hizo la elección de habilidad. El parser necesitaría conectar esta referencia.

---
### **Etiquetas Específicas para Trasfondos (Backgrounds)**
---

**`<background>`**
Contenedor raíz para la definición de un trasfondo.
*   **`<name>`**: Nombre del trasfondo (ej: "Acolyte [2024]").
*   **`<source page="[numero]">[LibroDeFuente]</source>`**: Información de la fuente.
*   **`<description_text>`**: Descripción general del trasfondo, incluyendo la narrativa y la página de origen si no está en la etiqueta `<source>`.
*   **`<ability_score_increase_option>`**: Describe las opciones de incremento de puntuación de característica.
    *   **`<text>`**: Texto que describe las opciones estándar de ASI (ej: "+2 a una, +1 a otra, o +1 a tres de una lista"). Este texto también puede indicar las tres habilidades relevantes para el trasfondo si no se usa `<abilities_list>`.
    *   **`<abilities_list list="[AbilityName1,AbilityName2,AbilityName3]"/>`**: (Opcional, más estructurado) Enumera las tres habilidades relevantes para este trasfondo de las cuales se pueden elegir los incrementos.
    *   **`<custom_choice_text>`**: (Para trasfondos personalizados) Texto que describe cómo elegir las habilidades.
*   **`<granted_feat name="[FeatName]" source_text="[LibroDeFuente p.NumeroPagina]">`**: Especifica el dote otorgado por el trasfondo.
    *   `name`: El nombre del dote.
    *   `source_text`: Texto que indica la fuente y página del dote.
    *   **`<text>`**: Descripción completa del dote. (Nota: Podría ser reemplazado por una referencia si los dotes están completamente estructurados y son referenciables por nombre/ID).
    *   **`<custom_choice_text>`**: (Para trasfondos personalizados) Texto que describe cómo elegir un dote de origen.
*   **`<skill_proficiencies>`**: Contenedor para las competencias en habilidades.
    *   **`<skill name="[SkillName1]"/>`**: Otorga competencia en una habilidad específica.
    *   **`<skill name="[SkillName2]"/>`**: Otorga competencia en otra habilidad específica.
    *   **`<custom_choice_text count="[numero]">`**: (Para trasfondos personalizados) Texto que describe cómo elegir un número específico de competencias en habilidades.
*   **`<tool_proficiencies>`**: Contenedor para las competencias en herramientas.
    *   **`<tool name="[SpecificToolName]"/>`**: Otorga competencia en una herramienta específica.
    *   **`<choice_from_category category="[ArtisansTools|MusicalInstruments|GamingSets]" description_text_override="[texto_opcional_con_lista_de_herramientas]">`**: Permite elegir una herramienta de una categoría específica.
        *   `category`: El tipo de categoría de herramienta (ej: "ArtisansTools", "MusicalInstruments", "GamingSets").
        *   `description_text_override` (opcional): Si se proporciona, este texto (que puede incluir la lista de herramientas de esa categoría) se usará en lugar de una descripción genérica. Es útil si la lista de herramientas se incluye directamente en el XML del trasfondo.
    *   **`<custom_choice_text>`**: (Para trasfondos personalizados) Texto que describe cómo elegir una competencia en herramienta.
*   **`<starting_equipment>`**: Contenedor para el equipo inicial.
    *   **`<text>`**: Texto introductorio general (ej: "Elige A o B:").
    *   **`<option_A>`**: Contenedor para la opción A de equipo.
        *   **`<item name="[ItemName]" quantity="[numero]"/>`**: Un objeto específico y su cantidad.
        *   **`<gold amount="[numero]"/>`**: Cantidad de oro.
    *   **`<option_B>`**: Contenedor para la opción B de equipo.
        *   **`<gold amount="[numero]"/>`**: Cantidad de oro.
    *   **`<custom_choice_text>`**: (Para trasfondos personalizados) Texto que describe cómo ensamblar un paquete de equipo (ej: "Ensambla un paquete de equipo por valor de 50 PO...").

---
### **Etiquetas Específicas de Subclase/Mecánicas Únicas (Clase)**
---
**`<mystic_arcanum level="[6|7|8|9]" spell_choice_from_list="Warlock">`** (Warlock)
Define la elección de un conjuro para Mystic Arcanum.

**`<spell_mastery>`** (Wizard)
Contenedor para la característica Spell Mastery.
*   **`<choose_spell level="[1|2]" from_spellbook="true" condition="[texto_condicion]"/>`**.

**`<signature_spells count="2" level="3" from_spellbook="true">`** (Wizard)
Define los Signature Spells.

**`<channel_divinity_option/>`**
Etiqueta marcadora para indicar que una característica es una opción de Canalizar Divinidad.

**`<focus_point_save_dc formula="[formula]">`** (Monk)
Define la CD de salvación para habilidades que usan Puntos de Foco.

**`<maneuver_save_dc formula="[formula]">`** (Battle Master Fighter)
Define la CD de salvación para maniobras.

**`<learns_maneuvers (atributos)>`** (Battle Master Fighter)
Define cuántas maniobras se aprenden.

**`<learns_metamagic_options (atributos)>`** (Sorcerer)
Define cuántas opciones de Metamagia se aprenden.

**`<learns_invocations (atributos)>`** (Warlock)
Define cuántas invocaciones se aprenden.

**`<companion_rules name="[CompanionName]">`** (Beast Master Ranger)
Contenedor para reglas específicas de un compañero.
*   **`<property name="[PropertyName]" value="[texto_valor]"/>`**
*   **`<combat_behavior>`**, **`<restoring_or_replacing>`**, etc.

**`<flexible_casting>`** (Sorcerer - Font of Magic)
Contenedor para las opciones de conversión de espacios de conjuro y puntos de hechicería.

**`<ward_recharge_options>`** (Abjurer Wizard - Arcane Ward)
Contenedor para opciones de recarga del ward.

**`<usage_penalty>`** (Evoker Wizard - Overchannel)
Contenedor para las penalizaciones por uso repetido.
*   **`<first_use_no_effect/>`**
*   **`<subsequent_use_before_LR>`**
*   **`<scaling_penalty_on_further_uses_before_LR description="[texto]"/>`**

---

Este glosario debería cubrir la gran mayoría de las estructuras para clases, dotes y razas. Es un sistema detallado y se espera que sea de gran ayuda para el parseo y la utilización de estos datos.
Cualquier nueva mecánica encontrada que no encaje claramente en estas etiquetas deberá ser analizada para determinar si se requiere una nueva etiqueta o una extensión de una existente.
La consistencia en la aplicación de estas etiquetas es clave para la mantenibilidad y utilidad del compendio XML.
